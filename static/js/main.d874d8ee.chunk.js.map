{"version":3,"sources":["components/LoginForm.js","components/SteckbriefActionFactory.js","components/TitleControl.js","components/Waiting.js","utils/convertItemToSimpleFeature.js","components/FeatureCollection.js","utils/filterFunction.js","components/InfoBox.js","version.js","components/MenuFooter.js","components/Menu.js","components/SecondaryInfo.js","PotenzialflaechenOnlineMap.js","App.js","reportWebVitals.js","index.js"],"names":["LoginForm","setJWT","jwt","console","log","loginInfo","setLoginInfo","windowSize","useContext","ResponsiveTopicMapContext","pwFieldRef","useRef","userFieldRef","modalBodyStyle","overflowY","overflowX","maxHeight","height","useState","user","_setUser","pw","setPw","cacheDataAvailable","setCacheDataAvailable","window","localforage","setUser","setItem","appKey","useEffect","a","getItem","userInCache","apiUrl","dataDaqKey","dataValueInCache","undefined","current","focus","select","login","fetch","method","headers","Authorization","btoa","then","response","status","json","responseWithJWT","color","text","setTimeout","catch","err","Modal","style","zIndex","size","show","keyboard","Header","Title","Icon","name","Body","id","Form","Group","controlId","Label","Control","value","ref","onChange","e","target","onKeyPress","event","key","placeholder","type","width","display","alignItems","flexDirection","justifyContent","margin","maxWidth","flexShrink","Button","onClick","CACHE_JWT","marginTop","variant","SteckbriefActionFactory","setWaiting","item","action","icon","title","nummer","taskParameters","parameters","POTENZIALFLAECHE","parseInt","fd","FormData","append","Blob","JSON","stringify","body","content","res","pdfUrl","blob","newBlob","url","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","iconname","tooltip","dateInfo","secondaryInfo","jwtPayload","actiontext","logout","metaInformation","FeatureCollectionContext","t","time","Date","toLocaleString","atob","split","parse","sub","titleContent","float","paddingRight","position","left","top","textAlign","verticalAlign","background","opacity","paddingLeft","Waiting","waiting","selectedFeature","properties","marginLeft","convert","_item","geometry","geojson","bezeichnung","kampagne","info","header","subtitle","groesse","selected","crs","dayjs","extend","customParseFormat","FC","zoomToFeature","TopicMapDispatchContext","FeatureCollectionDispatchContext","setItems","setMetaInformation","md5ActionFetchDAQ","result","toDate","data","features","push","convertItemToFeature","polyIndex","createFlatbushIndex","i","feature","hits","findInFlatbush","hit","overlapping","length","featureArea","area","intersection","intersectionRatio","intersect","problem","FeatureCollection","featureClickHandler","originalEvent","stopImmediatePropagation","itemFilterFunction","filterState","kampagnen","includes","InfoBox","props","featureCollectionContext","setSelectedFeatureByPredicate","overlappingHeaders","counter","isActive","overlap","paddingBottom","cursor","InfoBoxHeader","headerColor","GenericInfoBoxFromFeature","secondaryInfoBoxElements","APPERSION","Footer","setAppMenuActiveMenuSection","UIDispatchContext","fontSize","className","scroller","scrollTo","containerId","reactCismapVersion","rel","MyMenu","filterMode","filteredItems","shownFeatures","setFilterState","setFilterMode","items","kampagnenValues","iconPos","order","order_by","sort","b","kampagnenvalue","filterConfiguration","mode","resetedFilter","filters","values","setAll","setNone","ModalApplicationMenu","menuIcon","menuTitle","menuIntroduction","to","smooth","delay","menuSections","Section","sectionKey","sectionTitle","term","count","getFilterHeader","sectionBsStyle","sectionContent","FilterPanel","DefaultSettingsPanel","skipFilterTitleSettings","skipClusteringSettings","skipSymbolsizeSetting","ConfigurableDocBlocks","configs","getSimpleHelpForTM","menuFooter","MenuFooter","InfoPanel","potenzialflaeche","subSections","desc","valFunc","Array","isArray","join","lagebewertung_verkehr","oepnv","naehe_zu","siedlungsraeumliche_lage","topografie","hang","SecondaryInfoPanelSection","bsStyle","padding","paddingTop","regionalplan","bplaene","festsetzungen_bplan","bauordnungsrecht_genehmigung","stand_bauordnungsrecht","umgebungsnutzung","brachflaechen","jahr_brachflaeche","bisherige_nutzung","bestand_bebauung","versiegelung","aeussere_erschliessung","wohnlagen","klimainformationen","beschreibung_flaeche","map","part","index","quelle","stand","d","date","getDate","getMonth","getFullYear","notwendige_massnahmen","kategorie","potenzialart","entwicklungsstand","restriktionen","empfohlene_nutzungen_wohnen","wohneinheiten","entwicklungsaussichten","verfuegbarkeit","verwertbarkeit","handlungsprioritaet","empfohlene_nutzungen","revitalisierung","handlungsdruck","anzahl_wohneinheiten","URLSearchParams","location","get","SecondaryInfo","titleIconName","mainSection","Math","round","stadtbezirke","sb","quartiere","q","eigentuemer","defaultLayerConf","namedLayers","cismetLight","PotenzialflaechenOnlineMap","gazData","history","TopicMapContext","setAppMenuVisible","handleCleanStart","search","newSearch","removeQueryPart","listen","TopicMapComponent","mapStyle","backgroundColor","homeZoom","maxZoom","locatorControl","modalMenu","infoBox","pixelwidth","config","displaySecondaryInfoAction","city","navigator","noun","singular","plural","noCurrentFeatureTitle","noCurrentFeatureContent","gazetteerHitTrigger","more","pid","check","host","selectionColor","Color","getGazData","setStaticGazData","prefix","sources","md5FetchText","adressen","bezirke","pois","kitas","getGazDataForTopicIds","App","staticGazData","dynGazData","setDynGazData","setGazData","backgroundModes","_setJWT","jwtInCache","potenzialflaechenGazResult","getInternetExplorerVersion","layerKey","TopicMapContextProvider","backgroundConfigurations","lbk","layerkey","src","stadtplan","vector","abkg","referenceSystem","MappingConstants","crs3857","mapEPSGCode","referenceSystemDefinition","proj4crs3857def","maskingPolygon","getColorFromProperties","classKeyFunction","f","convertItemToSimpleFeature","genericLinks","alwaysShowAllFeatures","getFeatureStyler","borderColor","fillOpacity","c","darken","weight","fillColor","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d874d8ee.chunk.js","sourcesContent":["import localforage from \"localforage\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport { Button, Form, Modal } from \"react-bootstrap\";\nimport IconComp from \"react-cismap/commons/Icon\";\nimport { ResponsiveTopicMapContext } from \"react-cismap/contexts/ResponsiveTopicMapContextProvider\";\nimport { CACHE_JWT } from \"react-cismap/tools/fetching\";\nimport { apiUrl, appKey, dataDaqKey } from \"../App\";\n\nconst LoginForm = ({\n  setJWT = (jwt) => {\n    console.log(\"you need to set the attribute setJWT in the <Login> component\", jwt);\n  },\n  loginInfo,\n  setLoginInfo = () => {},\n}) => {\n  const { windowSize } = useContext(ResponsiveTopicMapContext);\n  const pwFieldRef = useRef();\n  const userFieldRef = useRef();\n  const _height = windowSize?.height || 800 - 180;\n  const modalBodyStyle = {\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    maxHeight: _height,\n  };\n  const [user, _setUser] = useState(\"\");\n  const [pw, setPw] = useState(\"\");\n  const [cacheDataAvailable, setCacheDataAvailable] = useState(false);\n\n  window.localforage = localforage;\n  const setUser = (user) => {\n    /*eslint no-useless-concat: \"off\"*/\n    localforage.setItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"user\", user);\n    _setUser(user);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const userInCache = await localforage.getItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"user\");\n      const dataValueInCache = await localforage.getItem(\n        \"@\" + appKey + \"..\" + apiUrl + \".\" + dataDaqKey + \".data\"\n      );\n\n      setCacheDataAvailable(dataValueInCache !== null && dataValueInCache !== undefined);\n      if (userInCache) {\n        setUser(userInCache);\n      }\n      if (userFieldRef?.current) {\n        userFieldRef.current.focus();\n        userFieldRef.current.select();\n      }\n    })();\n  }, []);\n\n  const login = () => {\n    fetch(\"https://potenzialflaechen-online-api.cismet.de/users\", {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Basic \" + btoa(user + \"@\" + \"WUNDA_BLAU\" + \":\" + pw),\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then(function (response) {\n        if (response.status >= 200 && response.status < 300) {\n          response.json().then(function (responseWithJWT) {\n            const jwt = responseWithJWT.jwt;\n            setLoginInfo({\n              color: \"#79BD9A\",\n              text: \"Anmeldung erfolgreich. Daten werden geladen.\",\n            });\n            setTimeout(() => {\n              setJWT(jwt);\n              setLoginInfo();\n            }, 500);\n          });\n        } else {\n          setLoginInfo({\n            color: \"#FF8048\",\n            text: \"Bei der Anmeldung ist ein Fehler aufgetreten. \",\n          });\n          setTimeout(() => {\n            setLoginInfo();\n          }, 2500);\n        }\n      })\n      .catch(function (err) {\n        setLoginInfo({ color: \"#FF3030\", text: \"Bei der Anmeldung ist ein Fehler aufgetreten.\" });\n        setTimeout(() => {\n          setLoginInfo();\n        }, 2500);\n      });\n  };\n\n  return (\n    <Modal\n      style={{\n        zIndex: 3000000000,\n      }}\n      height='100%'\n      size='l'\n      show={true}\n      //   onHide={close}\n      keyboard={false}\n    >\n      <Modal.Header>\n        <Modal.Title>\n          <div>\n            <div>\n              <IconComp name={\"user\"} /> Anmeldung\n            </div>\n          </div>\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body style={modalBodyStyle} id='potenzialflaechen-online' key='login'>\n        <Form>\n          <Form.Group controlId='potenzialflaechen-online-login'>\n            <Form.Label>WuNDa Benutzername</Form.Label>\n            <Form.Control\n              value={user}\n              ref={userFieldRef}\n              onChange={(e) => {\n                setUser(e.target.value);\n              }}\n              onKeyPress={(event) => {\n                if (event.key === \"Enter\") {\n                  // login();\n                  if (pwFieldRef.current) {\n                    pwFieldRef.current.focus();\n                  }\n                }\n              }}\n              placeholder='Login hier eingeben'\n            />\n            {/* <Form.Text className='text-muted'>\n              We'll never share your email with anyone else.\n            </Form.Text> */}\n          </Form.Group>\n\n          <Form.Group controlId='potenzialflaechen-online-pass'>\n            <Form.Label>Passwort</Form.Label>\n            <Form.Control\n              ref={pwFieldRef}\n              value={pw}\n              onChange={(e) => {\n                setPw(e.target.value);\n              }}\n              type='password'\n              placeholder='Password'\n              onKeyPress={(event) => {\n                if (event.key === \"Enter\") {\n                  login();\n                }\n              }}\n            />\n          </Form.Group>\n          <div\n            style={{\n              width: \"100%\",\n              display: \"flex\",\n              alignItems: \"baseline\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            {loginInfo?.text && (\n              <div style={{ margin: 10, color: loginInfo?.color || \"black\", maxWidth: 200 }}>\n                <b>{loginInfo?.text}</b>\n              </div>\n            )}\n            <div style={{ flexShrink: 100 }}></div>\n            <div>\n              {cacheDataAvailable === true && (\n                <Button\n                  onClick={(e) => {\n                    setLoginInfo({\n                      color: \"#79BD9A\",\n                      text: \"Alte Daten werden aus dem Cahe übernommen.\",\n                    });\n                    setTimeout(() => {\n                      setJWT(CACHE_JWT);\n                      setLoginInfo();\n                    }, 500);\n                  }}\n                  style={{ margin: 5, marginTop: 30 }}\n                  variant='secondary'\n                >\n                  Offline arbeiten\n                </Button>\n              )}\n              <Button\n                onClick={(e) => {\n                  login();\n                }}\n                style={{ margin: 5, marginTop: 30 }}\n                variant='primary'\n              >\n                Anmeldung\n              </Button>\n            </div>\n          </div>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  );\n};\nexport default LoginForm;\n","import { CACHE_JWT } from \"react-cismap/tools/fetching\";\n\nconst SteckbriefActionFactory = ({ setWaiting, item, jwt, setJWT, setLoginInfo }) => {\n  return {\n    action: () => {\n      if (jwt && jwt !== CACHE_JWT) {\n        setWaiting({\n          icon: \"file-pdf\",\n          title: \"Steckbrief \" + item.nummer + \" wird erzeugt\",\n          text: \"Nachdem der Steckbrief fertiggestellt wurde, startet automatisch der Download.\",\n        });\n        let taskParameters = {\n          parameters: {\n            POTENZIALFLAECHE: parseInt(item.id),\n          },\n        };\n\n        let fd = new FormData();\n        fd.append(\n          \"taskparams\",\n          new Blob([JSON.stringify(taskParameters)], {\n            type: \"application/json\",\n          })\n        );\n        fetch(\n          // \"https://potenzialflaechen-online-api.cismet.de/users\",\n          // \"https://eniptvf9euuoeze.m.pipedream.net\",\n\n          \"https://potenzialflaechen-online-api.cismet.de/actions/WUNDA_BLAU.potenzialflaecheReport/tasks?resultingInstanceType=result\",\n          {\n            method: \"POST\",\n            // method: \"GET\",\n            headers: {\n              Authorization: \"Bearer \" + jwt,\n              // \"Content-Type\": \"application/json\",\n              // Accept: \"application/json\",\n            },\n            body: fd,\n          }\n        )\n          .then(function (response) {\n            if (response.status >= 200 && response.status < 300) {\n              response.json().then(function (content) {\n                console.log(\"response from cids\", content);\n                if (content.res) {\n                  //\n                  const pdfUrl =\n                    \"https://potenzialflaechen-online-api.cismet.de\" +\n                    \"/secres/\" +\n                    jwt +\n                    \"/potenzialflaecheReportExt/\" +\n                    content.res;\n                  try {\n                    fetch(pdfUrl).then((response) => {\n                      response.blob().then((blob) => {\n                        const newBlob = new Blob([blob], { type: \"application/pdf\" });\n                        const url = window.URL.createObjectURL(newBlob);\n                        var link = document.createElement(\"a\");\n                        link.href = url;\n                        link.download = \"Steckbrief.\" + item.nummer + \".pdf\";\n                        document.body.appendChild(link);\n                        link.click();\n                        document.body.removeChild(link);\n                      });\n                    });\n                  } catch (e) {\n                    console.log(\"Probleme beim Laden des Reports\", e, pdfUrl);\n                  }\n                } else {\n                  console.log(\"Probleme beim Erzeugen des Reports\");\n                }\n                setWaiting();\n              });\n            } else {\n              if (response.status === 401) {\n                setWaiting();\n                setJWT(undefined);\n                setLoginInfo({\n                  color: \"#F9D423\",\n                  text: \"Bitte melden Sie sich erneut an.\",\n                });\n                setTimeout(() => {\n                  setLoginInfo();\n                }, 2500);\n              }\n              // response.text().then((x) => {189\t60\t90\n              //   console.log(\"error\", x);\n              // });\n            }\n          })\n          .catch(function (err) {\n            ///\n            setWaiting();\n          });\n\n        // setTimeout(() => {\n        //   setWaiting();\n        // }, 2500);\n      } else {\n        setWaiting({\n          icon: \"file-pdf\",\n          title: \"Steckbrief \" + item.nummer,\n          text: \"Steckbriefe können im Offline Modus leider nicht erzeugt werden. ¯\\\\_(ツ)_/¯ \",\n        });\n        setTimeout(() => {\n          setWaiting();\n        }, 2500);\n      }\n    },\n    iconname: \"file-pdf\",\n    tooltip: \"Steckbrief erzeugen\" + (jwt === CACHE_JWT ? \" (Im Offline Modus nicht möglich)\" : \"\"),\n  };\n};\n\nexport default SteckbriefActionFactory;\n","import { useContext } from \"react\";\nimport { ResponsiveTopicMapContext } from \"react-cismap/contexts/ResponsiveTopicMapContextProvider\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\n\nimport { CACHE_JWT } from \"react-cismap/tools/fetching\";\n\nconst Title = ({ logout, jwt }) => {\n  const { windowSize } = useContext(ResponsiveTopicMapContext);\n  const { metaInformation } = useContext(FeatureCollectionContext);\n  let dateInfo;\n  if (metaInformation) {\n    const t = metaInformation.time;\n    const d = new Date(t);\n    dateInfo = d.toLocaleString();\n  }\n\n  let secondaryInfo, jwtPayload, actiontext;\n  if (jwt === CACHE_JWT) {\n    secondaryInfo = \"Daten aus dem Cache\"; //;+ metaInformation.time;\n    actiontext = \"anmelden und Daten aktualisieren\";\n  } else {\n    try {\n      jwtPayload = atob(jwt.split(\".\")[1]);\n      secondaryInfo = JSON.parse(jwtPayload).sub;\n      actiontext = \"abmelden\";\n    } catch (e) {}\n  }\n  /*eslint jsx-a11y/anchor-is-valid: \"off\"*/\n  const titleContent = (\n    <div>\n      <b>Potenzialflächen-Online</b> (\n      {secondaryInfo + (dateInfo !== undefined ? \", \" + dateInfo : \"\")})\n      <div style={{ float: \"right\", paddingRight: 10 }}>\n        <a\n          style={{ color: \"#337ab7\" }}\n          onClick={() => {\n            logout();\n          }}\n        >\n          {/* <FontAwesomeIcon icon={faRandom} style={{ marginRight: 5 }} /> */}\n          {actiontext}\n        </a>\n      </div>\n    </div>\n  );\n\n  return (\n    <table\n      style={{\n        width: (windowSize?.width || 300) - 54 - 12 - 38 - 12 + \"px\",\n        height: \"30px\",\n        position: \"absolute\",\n        left: 54,\n        top: 12,\n        zIndex: 555,\n      }}\n    >\n      <tbody>\n        <tr>\n          <td\n            style={{\n              textAlign: \"center\",\n              verticalAlign: \"middle\",\n              background: \"#ffffff\",\n              color: \"black\",\n              opacity: \"0.9\",\n              paddingLeft: \"10px\",\n            }}\n          >\n            {titleContent}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n\nexport default Title;\n","import { useContext } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport IconComp from \"react-cismap/commons/Icon\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport ReactLoading from \"react-loading\";\n\nconst Waiting = ({ waiting }) => {\n  const { selectedFeature } = useContext(FeatureCollectionContext);\n\n  return (\n    <Modal\n      style={{\n        zIndex: 3000000000,\n      }}\n      height='200'\n      size='s'\n      show={waiting !== undefined}\n      //   onHide={close}\n      keyboard={false}\n    >\n      <Modal.Header>\n        <Modal.Title>\n          <IconComp name={waiting?.icon} /> {waiting?.title}\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"baseline\" }}>\n          <ReactLoading type={\"cylon\"} color={selectedFeature?.properties.color} />{\" \"}\n          <div style={{ marginLeft: 20 }}>{waiting?.text}</div>\n        </div>\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default Waiting;\n","const convert = (_item) => {\n  const item = JSON.parse(JSON.stringify(_item));\n\n  const geometry = item?.geojson;\n  const selected = false;\n  const type = \"Feature\";\n  const text = item?.bezeichnung;\n\n  item.color = item?.kampagne?.color;\n\n  const info = {\n    header: item?.kampagne?.bezeichnung,\n    title: text,\n    subtitle:\n      \"<html><div><b>Nummer:</b> \" +\n      item?.nummer +\n      \"</div><div><b>Größe:</b> \" +\n      parseInt(item?.groesse, 10).toLocaleString() +\n      \" m²</div></html>\",\n  };\n  item.info = info;\n\n  return {\n    id: item.id,\n    text,\n    type,\n    selected,\n    geometry,\n    crs: geometry?.crs || {\n      type: \"name\",\n      properties: {\n        name: \"urn:ogc:def:crs:EPSG::25832\",\n      },\n    },\n    properties: item,\n  };\n};\nexport default convert;\n","import area from \"@turf/area\";\nimport intersect from \"@turf/intersect\";\nimport dayjs from \"dayjs\";\nimport customParseFormat from \"dayjs/plugin/customParseFormat\";\nimport { useContext, useEffect } from \"react\";\nimport { FeatureCollectionDispatchContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { TopicMapDispatchContext } from \"react-cismap/contexts/TopicMapContextProvider\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport { md5ActionFetchDAQ } from \"react-cismap/tools/fetching\";\nimport { createFlatbushIndex, findInFlatbush } from \"react-cismap/tools/gisHelper\";\nimport { apiUrl, dataDaqKey } from \"../App\";\nimport { appKey } from \"../PotenzialflaechenOnlineMap\";\nimport convertItemToFeature from \"../utils/convertItemToSimpleFeature\";\ndayjs.extend(customParseFormat);\n\nconst FC = ({ jwt, setJWT, setLoginInfo }) => {\n  const { zoomToFeature } = useContext(TopicMapDispatchContext);\n  const { setItems, setMetaInformation } = useContext(FeatureCollectionDispatchContext);\n\n  useEffect(() => {\n    if (jwt !== undefined) {\n      md5ActionFetchDAQ(appKey, apiUrl, jwt, dataDaqKey)\n        .then(\n          (result) => {\n            //parse e.g. 2021-06-23 06:51:56.97500\n            const time = dayjs(result.time, \"YYYY-MM-DD hh:mm:ss\").toDate();\n            if (!result.data) {\n              return;\n            }\n            //Check for sibblings and add them to the original data\n            // console.time(\"xxx sibblingsCheck\");\n            const features = [];\n            for (const item of result.data) {\n              features.push(convertItemToFeature(item));\n            }\n            const polyIndex = createFlatbushIndex(features);\n\n            let i = 0;\n            for (const feature of features) {\n              const hits = findInFlatbush(polyIndex, feature, features, (hit) => {\n                return hit.id !== feature.id;\n              });\n              const overlapping = [];\n              if (hits.length > 0) {\n                const featureArea = area(feature);\n                for (const hit of hits) {\n                  let intersection, intersectionArea;\n                  let intersectionRatio = 1;\n                  try {\n                    intersection = intersect(feature.geometry, hit.geometry);\n                    if (intersection) {\n                      intersectionArea = area(intersection);\n                    } else {\n                      intersectionArea = 0;\n                    }\n                    intersectionRatio = intersectionArea / featureArea;\n                  } catch (e) {\n                    console.log(\"error during intersection \", e);\n                    console.log(\"error during intersection \", intersection);\n                  }\n\n                  if (intersectionRatio > 0.1) {\n                    overlapping.push({ id: hit.properties.id, kampagne: hit.properties.kampagne });\n                  } else {\n                    // console.log(\"no hit for \", hit.text);\n                  }\n                }\n              }\n\n              // result.data[i].geojson = buffered.geometry;\n              result.data[i].overlapping = overlapping;\n              ++i;\n            }\n            // console.timeEnd(\"xxx sibblingsCheck\");\n\n            setItems(result.data);\n            setMetaInformation({ time });\n          },\n          (problem) => {\n            if (problem.status === 401) {\n              setJWT(undefined);\n              setLoginInfo({ color: \"#F9D423\", text: \"Bitte melden Sie sich erneut an.\" });\n              setTimeout(() => {\n                setLoginInfo();\n              }, 2500);\n            }\n            setItems([]);\n            setMetaInformation();\n          }\n        )\n        .catch((e) => {\n          console.log(\"xxx error \", e);\n        });\n    } else {\n      setItems([]);\n    }\n  }, [jwt, setJWT, setLoginInfo]); // setItems, setMetaInformation swill rerrender too often\n  return (\n    <FeatureCollection\n      featureClickHandler={(event) => {\n        event.originalEvent.stopImmediatePropagation();\n        const feature = event.target.feature;\n        if (feature.selected === true) {\n          zoomToFeature(event.target.feature);\n        }\n        // }\n      }}\n    />\n  );\n};\n\nexport default FC;\n","const itemFilterFunction = ({ filterState }) => {\n  return (item) => {\n    return filterState?.kampagnen?.includes(item.kampagne.bezeichnung);\n  };\n};\nexport default itemFilterFunction;\n","import { useContext } from \"react\";\nimport {\n  FeatureCollectionContext,\n  FeatureCollectionDispatchContext,\n} from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\nimport InfoBoxHeader from \"react-cismap/topicmaps/InfoBoxHeader\";\nimport itemFilterFunction from \"../utils/filterFunction\";\nconst InfoBox = (props) => {\n  const featureCollectionContext = useContext(FeatureCollectionContext);\n  const { setSelectedFeatureByPredicate } = useContext(FeatureCollectionDispatchContext);\n  const { selectedFeature, filterState } = featureCollectionContext;\n\n  const overlappingHeaders = [];\n  let counter = 1;\n  const isActive = itemFilterFunction({ filterState });\n\n  if (selectedFeature?.properties?.overlapping) {\n    for (const overlap of selectedFeature.properties.overlapping) {\n      if (isActive(overlap)) {\n        overlappingHeaders.push(\n          <div\n            style={{\n              width: 350,\n              paddingBottom: 3,\n              paddingLeft: counter * 5,\n\n              cursor: \"pointer\", //is a hand\n            }}\n            onClick={() => {\n              setSelectedFeatureByPredicate((feature) => {\n                return feature?.properties?.id === overlap.id;\n              });\n            }}\n          >\n            <InfoBoxHeader\n              headerColor={overlap.kampagne.color}\n              content={overlap.kampagne.bezeichnung}\n            ></InfoBoxHeader>\n          </div>\n        );\n      }\n      counter++;\n    }\n  }\n\n  return (\n    <div>\n      <GenericInfoBoxFromFeature {...props} secondaryInfoBoxElements={overlappingHeaders} />\n    </div>\n  );\n};\n\nexport default InfoBox;\n","const APPERSION = \"1.0.2\";\nconst APPHASH = \"#a596f95d672b1d1cbdafa72c7c3149219188cad2\";\n\nexport const getApplicationVersion = () => {\n  /*eslint-disable no-useless-concat*/\n  if (APPERSION === \"%APPLICATION\" + \"_\" + \"VERSION%\") {\n    return \"dev-hot-reload\";\n  } else {\n    return APPERSION;\n  }\n};\nexport const getApplicationHash = () => {\n  if (APPHASH === \"%APPLICATION\" + \"_\" + \"HASH%\") {\n    return \"#dev-hot-reload\";\n  } else {\n    return APPHASH;\n  }\n};\n","import { useContext } from \"react\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { version as reactCismapVersion } from \"react-cismap/meta\";\nimport { scroller } from \"react-scroll\";\nimport { getApplicationVersion } from \"../version\";\n\nconst Footer = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n  /*eslint jsx-a11y/anchor-is-valid: \"off\"*/\n  return (\n    <div style={{ fontSize: \"11px\" }}>\n      <b>Hintergrundkarten</b>: Stadtkarte 2.0 © RVR | True Orthophoto 2020 © Stadt Wuppertal |\n      Openmaptiles basierte Vectorkarte (hosted by cismet){\" \"}\n      <a\n        className='pleaseRenderAsLink'\n        onClick={() => {\n          setAppMenuActiveMenuSection(\"help\");\n          scroller.scrollTo(\"Datengrundlage\", { containerId: \"myMenu\" });\n        }}\n      >\n        (Details und Nutzungsbedingungen)\n      </a>\n      <br />\n      <div>\n        <b>\n          {document.title} v{getApplicationVersion()}\n        </b>\n        :{\" \"}\n        <a href='https://cismet.de/' target='_cismet'>\n          cismet GmbH\n        </a>{\" \"}\n        auf Basis von{\" \"}\n        <a href='http://leafletjs.com/' target='_more'>\n          Leaflet\n        </a>{\" \"}\n        und{\" \"}\n        <a href='https://cismet.de/#refs' target='_cismet'>\n          cids | react-cismap v{reactCismapVersion}\n        </a>{\" \"}\n        |{\" \"}\n        <a\n          target='_blank'\n          rel='noopener noreferrer'\n          href='https://cismet.de/datenschutzerklaerung.html'\n        >\n          Datenschutzerklärung (Privacy Policy)\n        </a>\n      </div>\n    </div>\n  );\n};\nexport default Footer;\n","import { useContext } from \"react\";\nimport {\n  FeatureCollectionContext,\n  FeatureCollectionDispatchContext,\n} from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { getSimpleHelpForTM } from \"react-cismap/tools/uiHelper\";\nimport { Link } from \"react-scroll\";\nimport ModalApplicationMenu from \"react-cismap/topicmaps/menu/ModalApplicationMenu\";\nimport Section from \"react-cismap/topicmaps/menu/Section\";\nimport FilterPanel from \"react-cismap/topicmaps/menu/FilterPanel\";\nimport DefaultSettingsPanel from \"react-cismap/topicmaps/menu/DefaultSettingsPanel\";\nimport ConfigurableDocBlocks from \"react-cismap/topicmaps/ConfigurableDocBlocks\";\nimport MenuFooter from \"./MenuFooter\";\n\nconst MyMenu = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n  const { filterState, filterMode, filteredItems, shownFeatures } =\n    useContext(FeatureCollectionContext);\n  const { setFilterState, setFilterMode } = useContext(FeatureCollectionDispatchContext);\n\n  const { items } = useContext(FeatureCollectionContext);\n\n  let kampagnen = [];\n  const kampagnenValues = [];\n\n  for (const item of items || []) {\n    if (!kampagnen.includes(item.kampagne.bezeichnung)) {\n      kampagnen.push(item.kampagne.bezeichnung);\n      kampagnenValues.push({\n        key: item.kampagne.bezeichnung,\n        title: item.kampagne.bezeichnung,\n        color: item.kampagne.color,\n        icon: \"square\",\n        iconPos: \"pre\",\n        order: item.kampagne.order_by,\n      });\n    }\n  }\n  kampagnenValues.sort((a, b) => {\n    return parseInt(a.order) - parseInt(b.order);\n  });\n\n  //delte and add sorted kamapgnen again\n  kampagnen = [];\n  for (const kampagnenvalue of kampagnenValues) {\n    kampagnen.push(kampagnenvalue.key);\n  }\n  const filterConfiguration = {\n    mode: \"list\", // list or tabs\n    resetedFilter: {\n      kampagnen,\n    },\n    filters: [\n      {\n        title: \"Kategorien\",\n        key: \"kampagnen\",\n        icon: \"layer-group\",\n        type: \"checkBoxes\", //\"tags\" or \"checkBoxes\",\n        values: kampagnenValues,\n        setAll: () => {\n          setFilterState({ ...filterState, kampagnen });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, kampagnen: [] });\n        },\n        // colorizer: (item, selected) => {\n        //   console.log(\"yyy colorizer item\", item);\n\n        //   return selected ? item.kampagne.color : \"#ee00ee\";\n        // },\n      },\n    ],\n  };\n\n  if (filterState === undefined && items !== undefined && items.length !== 0) {\n    setFilterState({ kampagnen });\n  }\n  if (filterMode === undefined && items !== undefined) {\n    setFilterMode(\"kampagnen\");\n  }\n  const topicMapTitle = \"Potenzialflächen Online\";\n  const simpleHelp = {\n    content: `Nach § 200 Baugesetzbuch können Gemeinden bebaubare Flächen in Karten und Listen erfassen \n(Baulandkataster). Im Rahmen des Förderprogramms Digitale Modellregionen konnte im Jahr 2021 das **Potenzialflächenkataster** \nder Abteilung 101.1 Stadtentwicklung in das Wuppertaler Navigations- und Datenmanagementsystem WuNDa integriert und der \nAufbau eines Baulückenkatasters gestartet werden. Potenzialflächen sind Flächen ab 2000 m², Baulücken haben eine Größe von 400 – 2000 m².\n\nAuf der Basis der eingepflegten digitalisierten und georeferenzierten Flächeninformationen, die laufend aktualisiert werden, \nwurde die mobile Anwendung „Potenzialflächen Online“ entwickelt. Sie erlaubt es, auf verschiedenen Endgeräten \nortsunabhängig auf die Datenbank und die kartographischen Darstellungen (= Kataster) zuzugreifen.\n  \nNeben der räumlichen Abgrenzung und Lage können alle **Informationen** zu Gewerbe- und Wohnbauflächenpotenzialen, \nallen Brachflächen und weiteren Flächensammlungen im ganzen Stadtgebiet oder in ausgewählten Bezirken bzw. Quartieren \ngesucht und angezeigt werden. Auf online lesbaren Datenblättern oder in pdf-Dateien werden alle relevanten Daten der \neinzelnen Flächen angezeigt: \n**Flächennummer** (diese beginnt immer mit der Stadtbezirksnummer), **Bezeichnung** (Name der Fläche), Größe (in m² und gerundet in ha), \n**Stadtbezirk/e**, **Quartier/e**, betroffene **Flurstück/e**, **Eigentümerkategorie/n** (anonymisiert), **Lagebewertungen** \n(bezogen auf den Verkehr und auf den Siedlungsraum), **ÖPNV-Qualität** (Schienen- und Busanbindung), **Nähe zu Verkehrswegen** (Autobahn bis Fahrradtrasse), \n**Topographie** (mit Angabe der Hangrichtung), **Planungsrecht** (Angaben zum Regionalplan, Flächennutzungsplan, Bebauungsplänen), **Umgebungsnutzungen**, \nvorhandene **Nutzung**, **Bebauung** und **Versiegelung**, **Wohnlagen** (gem. Gutachterausschuss), **Bodenrichtwert/e**, **Beschreibungen** \n(Historie, Informationen, Planungen) und **Bewertungen** (Innen- oder Außenentwicklung, Potenzialarten, Restriktionen, Empfohlene Nutzung, \n  Entwicklungsaussichten, Verfügbarkeit, Verwertbarkeit, Revitalisierung, Handlungsdruck, Handlungspriorität). \n  \nAnmerkungen und Hinweise können an  [christiane.classen@stadt.wuppertal.de](mailto:christiane.classen@stadt.wuppertal.de) \n(R 101.11 Intergierte Stadtentwicklung und regionale Kooperation) gesendet werden.`,\n  };\n\n  const getFilterHeader = () => {\n    const count = filteredItems?.length || 0;\n\n    let term;\n    if (count === 1) {\n      term = \"Fläche\";\n    } else {\n      term = \"Flächen\";\n    }\n\n    return `Meine Potenzialflächen (${count} ${term} gefunden, davon ${\n      shownFeatures?.length || \"0\"\n    } in der Karte)`;\n  };\n\n  return (\n    <ModalApplicationMenu\n      menuIcon={\"bars\"}\n      menuTitle={\"Meine Potenzialflächen, Einstellungen und Kompaktanleitung\"}\n      menuIntroduction={\n        <span>\n          Benutzen Sie die Auswahlmöglichkeiten unter{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='filter'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"filter\")}\n          >\n            Meine Potenzialflächen\n          </Link>\n          , um die in der Karte angezeigten Potenzialflächen auf die für Sie relevanten Themen zu\n          beschränken. Über{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='settings'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"settings\")}\n          >\n            Einstellungen\n          </Link>{\" \"}\n          können Sie die Darstellung der Hintergrundkarte an Ihre Interessen anpassen. Wählen Sie\n          die{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='help'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"help\")}\n          >\n            Kompaktanleitung\n          </Link>{\" \"}\n          für detailliertere Bedienungsinformationen.\n        </span>\n      }\n      menuSections={[\n        <Section\n          key='filter'\n          sectionKey='filter'\n          sectionTitle={getFilterHeader()}\n          sectionBsStyle='primary'\n          sectionContent={<FilterPanel filterConfiguration={filterConfiguration} />}\n        />,\n        <DefaultSettingsPanel\n          key='settings'\n          skipFilterTitleSettings={true}\n          skipClusteringSettings={true}\n          skipSymbolsizeSetting={true}\n        />,\n\n        <Section\n          key='help'\n          sectionKey='help'\n          sectionTitle='Kompaktanleitung'\n          sectionBsStyle='default'\n          sectionContent={\n            <ConfigurableDocBlocks configs={getSimpleHelpForTM(topicMapTitle, simpleHelp)} />\n          }\n        />,\n      ]}\n      menuFooter={<MenuFooter />}\n    />\n  );\n};\nexport default MyMenu;\n","import React, { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport SecondaryInfoPanelSection from \"react-cismap/topicmaps/SecondaryInfoPanelSection\";\nimport SecondaryInfo from \"react-cismap/topicmaps/SecondaryInfo\";\nconst InfoPanel = () => {\n  const { selectedFeature } = useContext(FeatureCollectionContext);\n\n  const potenzialflaeche = selectedFeature?.properties;\n\n  if (potenzialflaeche !== undefined) {\n    const subSections = [];\n\n    const display = (desc, value, valFunc) => {\n      if (value && valFunc === undefined && Array.isArray(value) === false) {\n        return (\n          <div>\n            <b>{desc}:</b> {value}\n          </div>\n        );\n      } else if (value && valFunc === undefined && Array.isArray(value) === true) {\n        return (\n          <div>\n            <b>{desc}:</b> {value.join(\", \")}\n          </div>\n        );\n      } else if (value && valFunc !== undefined) {\n        return (\n          <div>\n            <b>{desc}:</b> {valFunc(value)}\n          </div>\n        );\n      }\n    };\n\n    if (\n      potenzialflaeche?.lagebewertung_verkehr ||\n      potenzialflaeche?.oepnv ||\n      potenzialflaeche?.naehe_zu ||\n      potenzialflaeche?.siedlungsraeumliche_lage ||\n      potenzialflaeche?.topografie ||\n      potenzialflaeche?.hang\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection key='standort' bsStyle='info' header={\"Lagebeschreibung\"}>\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Lagebewertung Verkehr\", potenzialflaeche?.lagebewertung_verkehr)}\n            {display(\"ÖPNV Qualität\", potenzialflaeche?.oepnv)}\n            {display(\"Nähe zu\", potenzialflaeche?.naehe_zu)}\n            {display(\"Siedlungsräumliche Lage\", potenzialflaeche?.siedlungsraeumliche_lage)}\n            {display(\"Topografie\", potenzialflaeche?.topografie)}\n            {display(\"Hangrichtung\", potenzialflaeche?.hang)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (\n      potenzialflaeche?.regionalplan ||\n      potenzialflaeche?.bplaene ||\n      potenzialflaeche?.festsetzungen_bplan ||\n      potenzialflaeche?.bauordnungsrecht_genehmigung ||\n      potenzialflaeche?.bauordnungsrecht_genehmigung ||\n      potenzialflaeche?.stand_bauordnungsrecht\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='danger'\n          header={<span>Planungsrecht / Bauordnungsrecht</span>}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Regionalplan\", potenzialflaeche?.regionalplan)}\n            {/* {display(\"Flächennutzungsplan\", potenzialflaeche?.)} */}\n            {display(\"Bebauungspläne\", potenzialflaeche?.bplaene)}\n            {display(\"Festsetzungen\", potenzialflaeche?.festsetzungen_bplan)}\n\n            {/* bauordnungsrecht_baulast kommt noch dazu*/}\n            {display(\"Bauordnungsrecht (Stand)\", potenzialflaeche?.stand_bauordnungsrecht)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n\n    if (\n      potenzialflaeche?.umgebungsnutzung ||\n      potenzialflaeche?.brachflaechen ||\n      potenzialflaeche?.jahr_brachflaeche ||\n      potenzialflaeche?.bisherige_nutzung ||\n      potenzialflaeche?.bestand_bebauung ||\n      potenzialflaeche?.versiegelung ||\n      potenzialflaeche?.aeussere_erschliessung ||\n      potenzialflaeche?.wohnlagen ||\n      potenzialflaeche?.klimainformationen\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='success'\n          header={\"Erweiterte Informationen\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Umgebungsnutzung\", potenzialflaeche?.umgebungsnutzung)}\n            {display(\"Brachfläche\", potenzialflaeche?.brachflaechen)}\n            {display(\"Nutzungsaufgabe\", potenzialflaeche?.jahr_brachflaeche)}\n            {display(\"Bisherige Nutzung\", potenzialflaeche?.bisherige_nutzung)}\n            {display(\"Bestand Bebauung\", potenzialflaeche?.bestand_bebauung)}\n            {display(\"Bestand Versiegelung\", potenzialflaeche?.versiegelung)}\n            {display(\"Äußere Erschließung\", potenzialflaeche?.aeussere_erschliessung)}\n            {display(\"Wohnlagen\", potenzialflaeche?.wohnlagen)}\n            {/* {display(\"Bodenrichtwerte\", potenzialflaeche?.)} */}\n            {/* {display(\"Stadtraumtypen\", potenzialflaeche?.)} */}\n            {display(\"Klimainformationen\", potenzialflaeche?.klimainformationen)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (potenzialflaeche?.beschreibung_flaeche) {\n      subSections.push(\n        <SecondaryInfoPanelSection key='standort' bsStyle='warning' header={\"Beschreibung\"}>\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {potenzialflaeche?.beschreibung_flaeche.split(\"\\n\").map((part, index) => {\n              return <p key={\"beschreibung.part\" + index}>{part}</p>;\n            })}\n\n            {display(\"Quelle\", potenzialflaeche?.quelle)}\n            {display(\"Stand\", potenzialflaeche?.stand, (d) => {\n              try {\n                const date = new Date(d);\n                return date.getDate() + \".\" + (date.getMonth() + 1) + \".\" + date.getFullYear();\n              } catch (e) {\n                return d;\n              }\n            })}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (potenzialflaeche?.notwendige_massnahmen) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='success'\n          header={\"Notwendige Maßnahmen / Nächste Schritte\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <p>{potenzialflaeche?.notwendige_massnahmen}</p>\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (\n      potenzialflaeche?.kategorie ||\n      potenzialflaeche?.potenzialart ||\n      potenzialflaeche?.entwicklungsstand ||\n      potenzialflaeche?.restriktionen ||\n      potenzialflaeche?.empfohlene_nutzungen_wohnen ||\n      potenzialflaeche?.wohneinheiten ||\n      potenzialflaeche?.entwicklungsaussichten ||\n      potenzialflaeche?.verfuegbarkeit ||\n      potenzialflaeche?.verwertbarkeit ||\n      potenzialflaeche?.handlungsprioritaet ||\n      potenzialflaeche?.empfohlene_nutzungen ||\n      potenzialflaeche?.revitalisierung ||\n      potenzialflaeche?.handlungsdruck\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection key='standort' bsStyle='info' header={\"Bewertung\"}>\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Kategorie\", potenzialflaeche?.kategorie)}\n            {display(\"Potenzialart\", potenzialflaeche?.potenzialart)}\n            {display(\"Entwicklungsstand\", potenzialflaeche?.entwicklungsstand)}\n            {display(\"Restriktionen / Hemnisse\", potenzialflaeche?.restriktionen)}\n            {display(\n              \"Empfohlene Art der Wohnnutzung\",\n              potenzialflaeche?.empfohlene_nutzungen_wohnen\n            )}\n            {display(\"Anzahl mög. Wohneinheiten\", potenzialflaeche?.wohneinheiten, (t) => (\n              <span>\n                {potenzialflaeche?.anzahl_wohneinheiten && (\n                  <span> {potenzialflaeche?.anzahl_wohneinheiten}</span>\n                )}{\" \"}\n                {t}\n              </span>\n            ))}\n\n            {display(\"Entwicklungsaussichten\", potenzialflaeche?.entwicklungsaussichten)}\n            {display(\"Verfügbarkeit\", potenzialflaeche?.verfuegbarkeit)}\n            {display(\"Verwertbarkeit\", potenzialflaeche?.verwertbarkeit)}\n            {display(\"Handlungspriorität (Verwaltung)\", potenzialflaeche?.handlungsprioritaet)}\n            {display(\"Empfohlene Nutzung\", potenzialflaeche?.empfohlene_nutzungen)}\n            {display(\"Revitalisierung\", potenzialflaeche?.revitalisierung)}\n            {display(\"Handlungsdruck\", potenzialflaeche?.handlungsdruck)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    // if (potenzialflaeche?.interne_hinweise) {\n    //   subSections.push(\n    //     <SecondaryInfoPanelSection key='standort' bsStyle='secondary' header={\"Interne Hinweise\"}>\n    //       <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n    //         {potenzialflaeche?.interne_hinweise.split(\"\\n\").map((part, index) => {\n    //           return <p key={\"interne_hinweise.part\" + index}>{part}</p>;\n    //         })}\n    //       </div>\n    //     </SecondaryInfoPanelSection>\n    //   );\n    // }\n\n    const showRawData = new URLSearchParams(window.location.href).get(\"showRawData\");\n    if (showRawData !== null) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='info'\n          header={\"Potenzialfläche (raw data): \" + potenzialflaeche?.nummer}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <pre>{JSON.stringify(potenzialflaeche, null, 2)}</pre>\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    return (\n      <SecondaryInfo\n        titleIconName='info-circle'\n        title={\"Datenblatt: \" + potenzialflaeche?.bezeichnung}\n        mainSection={\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <div>\n              {display(\"Nummer\", potenzialflaeche?.nummer)}\n              {display(\"Bezeichnung\", potenzialflaeche?.bezeichnung)}\n              {display(\"Kampagne\", potenzialflaeche?.kampagne?.bezeichnung)}\n              {display(\"Flächengröße\", potenzialflaeche?.groesse, (a) => (\n                <span>\n                  {a.toLocaleString()} m² (circa{\" \"}\n                  {(Math.round((a / 10000) * 10) / 10).toLocaleString()} ha)\n                </span>\n              ))}\n              {display(\"Stadtbezirk(e)\", potenzialflaeche?.stadtbezirke, (sb) => sb.join(\", \"))}\n              {display(\"Quartier(e)\", potenzialflaeche?.quartiere, (q) => q.join(\", \"))}\n              {display(\"Eigentümer\", potenzialflaeche?.eigentuemer, (e) => e.join(\", \"))}\n            </div>\n          </div>\n        }\n        subSections={subSections}\n      />\n    );\n  } else {\n    return null;\n  }\n};\nexport default InfoPanel;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport React, { useContext, useEffect } from \"react\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport { FeatureCollectionDispatchContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport {\n  TopicMapContext,\n  TopicMapDispatchContext,\n} from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { defaultLayerConf } from \"react-cismap/tools/layerFactory\";\nimport { removeQueryPart } from \"react-cismap/tools/routingHelper\";\nimport \"react-cismap/topicMaps.css\";\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport \"./App.css\";\nimport FeatureCollection from \"./components/FeatureCollection\";\nimport InfoBox from \"./components/InfoBox\";\nimport MyMenu from \"./components/Menu\";\nimport InfoPanel from \"./components/SecondaryInfo\";\n\n// import consolere from \"console-remote-client\";\n\n// consolere.connect({\n//   server: \"http://bender:8088\",\n//   channel: \"pf\", // required\n//   redirectDefaultConsoleToRemote: false, // optional, default: false\n//   disableDefaultConsoleOutput: false, // optional, default: false\n// });\n\n// console.re.log(\"S T A R T\");\n\nconst baseLayerConf = { ...defaultLayerConf };\nbaseLayerConf.namedLayers.cismetLight = {\n  type: \"vector\",\n  style: \"https://omt.map-hosting.de/styles/cismet-light/style.json\",\n};\n\nexport const appKey = \"Potenzialflaechen.Online.Wuppertal\";\n\nfunction PotenzialflaechenOnlineMap({ gazData, jwt, setJWT, setLoginInfo }) {\n  const { setSelectedFeatureByPredicate, setFilterState } = useContext(\n    FeatureCollectionDispatchContext\n  );\n  const { zoomToFeature } = useContext(TopicMapDispatchContext);\n  const { history } = useContext(TopicMapContext);\n  const { setAppMenuActiveMenuSection, setAppMenuVisible } = useContext(UIDispatchContext);\n\n  useEffect(() => {\n    const handleCleanStart = (search) => {\n      const foundCleanStart = new URLSearchParams(search).get(\"cleanStart\") != null;\n      if (foundCleanStart === true) {\n        let newSearch = removeQueryPart(search, \"cleanStart\");\n        history.push(newSearch);\n        setFilterState({ kampagnen: [] });\n        setAppMenuVisible(true);\n        setTimeout(() => {\n          setAppMenuActiveMenuSection(\"filter\");\n        }, 50);\n      }\n    };\n    handleCleanStart(history.location.search);\n    return history.listen(() => {\n      handleCleanStart(history.location.search);\n    });\n  }, [history, setFilterState, setAppMenuVisible, setAppMenuActiveMenuSection]);\n\n  return (\n    <TopicMapComponent\n      mapStyle={{ backgroundColor: \"white\" }}\n      gazData={gazData}\n      homeZoom={13}\n      maxZoom={22}\n      locatorControl={true}\n      modalMenu={<MyMenu />}\n      //backgroundlayers='wupp-plan-live@40'\n      // backgroundlayers='OMT_Klokantech_basic'\n      // 'trueOrtho2020@20'\n      infoBox={\n        <InfoBox\n          pixelwidth={350}\n          config={{\n            displaySecondaryInfoAction: true,\n            city: \"Wuppertal\",\n            navigator: {\n              noun: {\n                singular: \"Potenzialfläche\",\n                plural: \"Potenzialflächen\",\n              },\n            },\n            noCurrentFeatureTitle: \"Keine Potenzialflächen gefunden\",\n            noCurrentFeatureContent: \"\",\n          }}\n        />\n      }\n      secondaryInfo={<InfoPanel />}\n      gazetteerHitTrigger={(hits) => {\n        if (Array.isArray(hits) && hits[0]?.more?.pid) {\n          setSelectedFeatureByPredicate((feature) => {\n            try {\n              const check = parseInt(feature.properties.id) === hits[0].more.pid;\n              if (check === true) {\n                zoomToFeature(feature);\n              }\n              return check;\n            } catch (e) {\n              return false;\n            }\n          });\n        }\n      }}\n    >\n      <FeatureCollection jwt={jwt} setJWT={setJWT} setLoginInfo={setLoginInfo} />\n      {/* <LogSelection /> */}\n    </TopicMapComponent>\n  );\n}\n\nexport default PotenzialflaechenOnlineMap;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport Color from \"color\";\nimport \"leaflet/dist/leaflet.css\";\nimport localforage from \"localforage\";\nimport { useEffect, useState } from \"react\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport { MappingConstants } from \"react-cismap\";\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { getInternetExplorerVersion } from \"react-cismap/tools/browserHelper\";\nimport { md5ActionFetchDAQ, md5FetchText } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\nimport { defaultLayerConf } from \"react-cismap/tools/layerFactory\";\nimport \"react-cismap/topicMaps.css\";\nimport \"./App.css\";\nimport LoginForm from \"./components/LoginForm\";\nimport SteckbriefActionFactory from \"./components/SteckbriefActionFactory\";\nimport Title from \"./components/TitleControl\";\nimport Waiting from \"./components/Waiting\";\nimport PotenzialflaechenOnlineMap from \"./PotenzialflaechenOnlineMap\";\nimport convertItemToSimpleFeature from \"./utils/convertItemToSimpleFeature\";\nimport itemFilterFunction from \"./utils/filterFunction\";\nconst baseLayerConf = { ...defaultLayerConf };\nbaseLayerConf.namedLayers.cismetLight = {\n  type: \"vector\",\n  style: \"https://omt.map-hosting.de/styles/cismet-light/style.json\",\n};\n\nconst host = \"https://wupp-topicmaps-data.cismet.de\";\nconst selectionColor = new Color(\"#2664D8\");\nexport const appKey = \"Potenzialflaechen.Online.Wuppertal\";\nexport const apiUrl = \"https://potenzialflaechen-online-api.cismet.de\";\nexport const dataDaqKey = \"potenzialflaechen\";\nexport const gazDaqKey = \"potenzialflaechenGaz\";\nconst getGazData = async (setStaticGazData) => {\n  const prefix = \"GazDataForStories\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/3857/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/3857/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/3857/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/3857/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/3857/kitas.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setStaticGazData(gazData);\n};\n\nfunction App() {\n  const [staticGazData, setStaticGazData] = useState([]);\n  const [dynGazData, setDynGazData] = useState([]);\n  const [gazData, setGazData] = useState([]);\n\n  useEffect(() => {\n    setGazData([...(dynGazData || []), ...staticGazData]);\n  }, [staticGazData, dynGazData]);\n\n  useEffect(() => {\n    getGazData(setStaticGazData);\n    document.title = \"Potenzialflächen-Online Wuppertal\";\n  }, []);\n\n  const [jwt, _setJWT] = useState();\n  const [loginInfo, setLoginInfo] = useState();\n\n  const [waiting, setWaiting] = useState();\n\n  const setJWT = (jwt) => {\n    /*eslint no-useless-concat: \"off\"*/\n    localforage.setItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"jwt\", jwt);\n    _setJWT(jwt);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const jwtInCache = await localforage.getItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"jwt\");\n      if (jwtInCache) {\n        setJWT(jwtInCache);\n      } else {\n        setJWT(undefined);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (jwt) {\n      md5ActionFetchDAQ(appKey, apiUrl, jwt, gazDaqKey)\n        .then(\n          (potenzialflaechenGazResult) => {\n            setDynGazData(potenzialflaechenGazResult.data);\n          },\n          (problem) => {\n            if (problem.status === 401) {\n              setJWT(undefined);\n              setLoginInfo({ color: \"#F9D423\", text: \"Bitte melden Sie sich erneut an.\" });\n              setTimeout(() => {\n                setLoginInfo();\n              }, 2500);\n            }\n            setDynGazData([]);\n          }\n        )\n        .catch((e) => {\n          console.log(\"xxx error \", e);\n        });\n    } else {\n      setDynGazData([]);\n    }\n  }, [jwt]);\n\n  let backgroundModes;\n  if (getInternetExplorerVersion() === -1) {\n    backgroundModes = [\n      {\n        title: \"Stadtplan (grau)\",\n        mode: \"default\",\n        layerKey: \"stadtplan\",\n      },\n      {\n        title: \"Stadtplan (Vektordaten light)\",\n        mode: \"default\",\n        layerKey: \"vector\",\n      },\n      {\n        title: \"Amtliche Basiskarte\",\n        mode: \"default\",\n        layerKey: \"abkg\",\n      },\n      { title: \"Luftbildkarte\", mode: \"default\", layerKey: \"lbk\" },\n    ];\n  } else {\n    backgroundModes = [\n      {\n        title: \"Stadtplan\",\n        mode: \"default\",\n        layerKey: \"stadtplan\",\n      },\n      {\n        title: \"Amtliche Basiskarte\",\n        mode: \"default\",\n        layerKey: \"abkg\",\n      },\n      { title: \"Luftbildkarte\", mode: \"default\", layerKey: \"lbk\" },\n    ];\n  }\n  const backgroundConfigurations = {\n    lbk: {\n      layerkey: \"rvrGrundriss@70|trueOrtho2020@40|rvrSchriftNT@100\",\n      src: \"/images/rain-hazard-map-bg/ortho.png\",\n      title: \"Luftbildkarte\",\n    },\n    stadtplan: {\n      layerkey: \"rvrGrau@45\",\n      src: \"/images/rain-hazard-map-bg/citymap.png\",\n      title: \"Stadtplan\",\n    },\n    vector: {\n      layerkey: \"cismetLight\",\n      src: \"/images/rain-hazard-map-bg/citymap.png\",\n      title: \"Stadtplan\",\n    },\n    abkg: {\n      layerkey: \"bplan_abkg@70\",\n      src: \"/images/rain-hazard-map-bg/citymap.png\",\n      title: \"Amtliche Basiskarte\",\n    },\n  };\n\n  return (\n    <TopicMapContextProvider\n      appKey={appKey}\n      backgroundConfigurations={backgroundConfigurations}\n      backgroundModes={backgroundModes}\n      referenceSystem={MappingConstants.crs3857}\n      mapEPSGCode='3857'\n      referenceSystemDefinition={MappingConstants.proj4crs3857def}\n      maskingPolygon='POLYGON((668010.063156992 6750719.23021889,928912.612468322 6757273.20343972,930494.610325512 6577553.43685138,675236.835570551 6571367.64964125,668010.063156992 6750719.23021889))'\n      getColorFromProperties={(item) => item.kampagne.color}\n      itemFilterFunction={itemFilterFunction}\n      classKeyFunction={(item) => item?.kampagne?.bezeichnung}\n      convertItemToFeature={(_item) => {\n        const f = convertItemToSimpleFeature(_item);\n        f.properties.genericLinks = [\n          SteckbriefActionFactory({ setWaiting, item: f.properties, jwt, setJWT, setLoginInfo }),\n        ];\n        return f;\n      }}\n      alwaysShowAllFeatures={false}\n      getFeatureStyler={() => {\n        return (feature) => {\n          const c = new Color(feature.properties.color);\n          let borderColor, fillOpacity;\n          if (feature.selected === true) {\n            fillOpacity = 0.85;\n            borderColor = selectionColor;\n          } else {\n            fillOpacity = 0.6;\n            borderColor = c.darken(0.1);\n          }\n          const style = {\n            color: borderColor,\n            weight: 2,\n            opacity: 0.7,\n            fillColor: c,\n            fillOpacity,\n          };\n          return style;\n        };\n      }}\n    >\n      {jwt === undefined && (\n        <LoginForm\n          key={\"login.\"}\n          setJWT={setJWT}\n          loginInfo={loginInfo}\n          setLoginInfo={setLoginInfo}\n        />\n      )}\n      {jwt !== undefined && (\n        <Title\n          logout={() => {\n            setJWT(undefined);\n            setLoginInfo({ color: \"#69D2E7\", text: \"Sie wurden erfolgreich abgemeldet.\" });\n            setTimeout(() => {\n              setLoginInfo();\n            }, 2500);\n          }}\n          jwt={jwt}\n        />\n      )}\n      <Waiting waiting={waiting} />\n\n      <PotenzialflaechenOnlineMap\n        gazData={gazData}\n        jwt={jwt}\n        setJWT={setJWT}\n        setLoginInfo={setLoginInfo}\n      />\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}