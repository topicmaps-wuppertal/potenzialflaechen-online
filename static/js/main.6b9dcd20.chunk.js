(this["webpackJsonppotenzialflaechen-online"]=this["webpackJsonppotenzialflaechen-online"]||[]).push([[0],{398:function(e,n,t){},721:function(e,n,t){},727:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t.n(i),a=t(22),r=t.n(a),l=(t(398),t(105)),s=t(12),c=t(17),u=t.n(c),d=t(35),h=t(7),g=t(56),v=t.n(g),b=t(121),p=t(25),f=t(59),j=t(218),m=t(392),x=t(390),O=t(14),y=t.n(O),k=t(280),w=t.n(k),z=t(20),S=t(172),A=t(4),T=function(){var e=Object(d.a)(u.a.mark((function e(n,t,i,o){var a,r,l,s,c,d,h,g,v,b,p,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(a="@"+n+".."+t+"."+o)+".md5",l=a+".data",s=a+".time",e.next=6,y.a.getItem(r);case 6:return c=e.sent,console.log("DAQ for "+o),d={parameters:{daqKey:o,md5:c||"-"}},(h=new FormData).append("taskparams",new Blob([JSON.stringify(d)],{type:"application/json"})),e.next=13,fetch(t+"/actions/WUNDA_BLAU.dataAquisition/tasks?resultingInstanceType=result",{method:"POST",headers:{Authorization:"Bearer "+i},body:h});case 13:if(!((g=e.sent).status>=200&&g.status<300)){e.next=51;break}return e.next=17,g.json();case 17:if(!(v=e.sent).res){e.next=48;break}if(e.prev=19,b=JSON.parse(v.res),200!==(p=b.status)){e.next=33;break}return console.log("DAQ cache miss for "+o),f=JSON.parse(b.content),e.next=27,y.a.setItem(l,b.content);case 27:return e.next=29,y.a.setItem(r,b.md5);case 29:return e.next=31,y.a.setItem(s,b.time);case 31:e.next=40;break;case 33:if(304!==p){e.next=40;break}return console.log("DAQ cache hit for "+o),e.t0=JSON,e.next=38,y.a.getItem(l);case 38:e.t1=e.sent,f=e.t0.parse.call(e.t0,e.t1);case 40:return e.abrupt("return",new Promise((function(e,n){e(f)})));case 43:return e.prev=43,e.t2=e.catch(19),e.abrupt("return",new Promise((function(n,t){t({status:500,desc:"error when parsing the server result. probably the content has the wrong structure",content:v,exception:e.t2})})));case 46:e.next=49;break;case 48:return e.abrupt("return",new Promise((function(e,n){n({status:500,desc:"error when parsing the server result.",content:v})})));case 49:e.next=56;break;case 51:if(401!==g.status){e.next=55;break}return e.abrupt("return",new Promise((function(e,n){n({status:g.status,desc:"unauthorized"})})));case 55:return e.abrupt("return",new Promise((function(e,n){n({status:g.status,desc:"unknown"})})));case 56:case"end":return e.stop()}}),e,null,[[19,43]])})));return function(n,t,i,o){return e.apply(this,arguments)}}(),B=function(e){var n=e.jwt,t=e.setJWT,o=e.setLoginInfo,a=Object(i.useContext)(p.b).zoomToFeature,r=Object(i.useContext)(z.b).setItems;return Object(i.useEffect)((function(){void 0!==n?T("potenzialflaechen-online","https://potenzialflaechen-online-api.cismet.de",n,"potenzialflaechen").then((function(e){r(e)}),(function(e){401===e.status&&(t(void 0),o({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){o()}),2500)),r([])})).catch((function(e){console.log("xxx error ",e)})):r([])}),[n]),Object(A.jsx)(S.a,{featureClickHandler:function(e){e.originalEvent.stopImmediatePropagation();Math.round(100*Math.random());!0===e.target.feature.selected&&a(e.target.feature)}})},C=t(175),_=t(732),I=t(114),P=t(9),L=t(23),F=function(e){var n=e.setJWT,t=void 0===n?function(e){console.log("you need to set the attribute setJWT in the <Logoin> component",e)}:n,o=e.loginInfo,a=e.setLoginInfo,r=void 0===a?function(){}:a,l=Object(i.useContext)(L.a).windowSize,c=Object(i.useRef)(),h=Object(i.useRef)(),g={overflowY:"auto",overflowX:"hidden",maxHeight:(null===l||void 0===l?void 0:l.height)||620},v=Object(i.useState)(""),b=Object(s.a)(v,2),p=b[0],f=b[1],j=Object(i.useState)(""),m=Object(s.a)(j,2),x=m[0],O=m[1];window.localforage=y.a;var k=function(e){y.a.setItem("@"+ae+".auth.user",e),f(e)};Object(i.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.getItem("@"+ae+".auth.user");case 2:(n=e.sent)&&k(n),(null===h||void 0===h?void 0:h.current)&&(h.current.focus(),h.current.select());case 5:case"end":return e.stop()}}),e)})))()}),[]);var w=function(){fetch("https://potenzialflaechen-online-api.cismet.de/users",{method:"GET",headers:{Authorization:"Basic "+btoa(p+"@WUNDA_BLAU:"+x),"Content-Type":"application/json"}}).then((function(e){e.status>=200&&e.status<300?e.json().then((function(e){var n=e.jwt;r({color:"#79BD9A",text:"Anmeldung erfolgreich. Daten werden geladen."}),setTimeout((function(){t(n),r()}),500)})):(r({color:"#FF8048",text:"Bei der Anmeldung ist ein Fehler aufgetreten. "}),setTimeout((function(){r()}),2500))})).catch((function(e){r({color:"#FF3030",text:"Bei der Anmeldung ist ein Fehler aufgetreten."}),setTimeout((function(){r()}),2500)}))};return Object(A.jsxs)(C.a,{style:{zIndex:3e9},height:"100%",size:"l",show:!0,keyboard:!1,children:[Object(A.jsx)(C.a.Header,{children:Object(A.jsxs)(C.a.Title,{children:[Object(A.jsx)(P.a,{name:"user"})," Anmeldung"]})}),Object(A.jsx)(C.a.Body,{style:g,id:"potenzialflaechen-online",children:Object(A.jsxs)(_.a,{children:[Object(A.jsxs)(_.a.Group,{controlId:"potenzialflaechen-online-login",children:[Object(A.jsx)(_.a.Label,{children:"WuNDa Benutzername"}),Object(A.jsx)(_.a.Control,{value:p,ref:h,onChange:function(e){k(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&c.current&&c.current.focus()},placeholder:"Login hier eingeben"})]}),Object(A.jsxs)(_.a.Group,{controlId:"potenzialflaechen-online-pass",children:[Object(A.jsx)(_.a.Label,{children:"Passwort"}),Object(A.jsx)(_.a.Control,{ref:c,value:x,onChange:function(e){O(e.target.value)},type:"password",placeholder:"Password",onKeyPress:function(e){"Enter"===e.key&&w()}})]}),Object(A.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"baseline",flexDirection:"row",justifyContent:"space-between"},children:[(null===o||void 0===o?void 0:o.text)&&Object(A.jsx)("div",{style:{margin:10,color:(null===o||void 0===o?void 0:o.color)||"black"},children:Object(A.jsx)("b",{children:null===o||void 0===o?void 0:o.text})}),Object(A.jsx)("div",{style:{flexShrink:100}}),Object(A.jsx)(I.a,{onClick:function(e){w()},style:{margin:10,marginTop:30},variant:"primary",children:"Anmeldung"})]})]})},"login")]})},N=function(e){var n,t,o=e.logout,a=e.jwt,r=Object(i.useContext)(L.a).windowSize;try{t=atob(a.split(".")[1]),n=JSON.parse(t).sub}catch(s){}var l=Object(A.jsxs)("div",{children:[Object(A.jsx)("b",{children:"Potenzialfl\xe4chen-Online"})," (",n,")",Object(A.jsx)("div",{style:{float:"right",paddingRight:10},children:Object(A.jsx)("a",{style:{color:"#337ab7"},onClick:function(){o()},children:"abmelden"})})]});return Object(A.jsx)("table",{style:{width:((null===r||void 0===r?void 0:r.width)||300)-54-12-38-12+"px",height:"30px",position:"absolute",left:54,top:12,zIndex:555},children:Object(A.jsx)("tbody",{children:Object(A.jsx)("tr",{children:Object(A.jsx)("td",{style:{textAlign:"center",verticalAlign:"middle",background:"#ffffff",color:"black",opacity:"0.9",paddingLeft:"10px"},children:l})})})})},D=t(107),E=t(393),K=function(){var e=Object(i.useContext)(z.a),n=e.selectedFeature,t=(e.items,null===n||void 0===n?void 0:n.properties);if(void 0!==t){var o=[],a=function(e,n,t){return n&&void 0===t&&!1===Array.isArray(n)?Object(A.jsxs)("div",{children:[Object(A.jsxs)("b",{children:[e,":"]})," ",n]}):n&&void 0===t&&!0===Array.isArray(n)?Object(A.jsxs)("div",{children:[Object(A.jsxs)("b",{children:[e,":"]})," ",n.join(", ")]}):n&&void 0!==t?Object(A.jsxs)("div",{children:[Object(A.jsxs)("b",{children:[e,":"]})," ",t(n)]}):void 0};return((null===t||void 0===t?void 0:t.lagebewertung_verkehr)||(null===t||void 0===t?void 0:t.oepnv)||(null===t||void 0===t?void 0:t.naehe_zu)||(null===t||void 0===t?void 0:t.siedlungsraeumliche_lage)||(null===t||void 0===t?void 0:t.topografie)||(null===t||void 0===t?void 0:t.hang))&&o.push(Object(A.jsx)(D.a,{bsStyle:"info",header:"Lagebeschreibung",children:Object(A.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[a("Lagebewertung Verkehr",null===t||void 0===t?void 0:t.lagebewertung_verkehr),a("\xd6PNV Qualit\xe4t",null===t||void 0===t?void 0:t.oepnv),a("N\xe4he zu",null===t||void 0===t?void 0:t.naehe_zu),a("Siedlungsr\xe4umliche Lage",null===t||void 0===t?void 0:t.siedlungsraeumliche_lage),a("Topografie",null===t||void 0===t?void 0:t.topografie),a("Hangrichtung",null===t||void 0===t?void 0:t.hang)]})},"standort")),((null===t||void 0===t?void 0:t.bplaene)||(null===t||void 0===t?void 0:t.festsetzungen_bplan)||(null===t||void 0===t?void 0:t.bauordnungsrecht_genehmigung)||(null===t||void 0===t?void 0:t.bauordnungsrecht_genehmigung)||(null===t||void 0===t?void 0:t.stand_bauordnungsrecht))&&o.push(Object(A.jsx)(D.a,{bsStyle:"danger",header:"Planungsrecht / Bauplanungsrecht / Bauordnungsrecht",children:Object(A.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[a("Regionalplan",null===t||void 0===t?void 0:t.regionalplan),a("Bebauungspl\xe4ne",null===t||void 0===t?void 0:t.bplaene),a("Festsetzungen",null===t||void 0===t?void 0:t.festsetzungen_bplan),a("Bauordnungsrecht (Genehmigung)",null===t||void 0===t?void 0:t.bauordnungsrecht_genehmigung),a("Bauordnungsrecht",null===t||void 0===t?void 0:t.bauordnungsrecht_genehmigung),a("Bauordnungsrecht (Stand)",null===t||void 0===t?void 0:t.stand_bauordnungsrecht)]})},"standort")),((null===t||void 0===t?void 0:t.umgebungsnutzung)||(null===t||void 0===t?void 0:t.brachflaechen)||(null===t||void 0===t?void 0:t.jahr_brachflaeche)||(null===t||void 0===t?void 0:t.bisherige_nutzung)||(null===t||void 0===t?void 0:t.bestand_bebauung)||(null===t||void 0===t?void 0:t.versiegelung)||(null===t||void 0===t?void 0:t.aeussere_erschliessung)||(null===t||void 0===t?void 0:t.wohnlagen)||(null===t||void 0===t?void 0:t.klimainformationen))&&o.push(Object(A.jsx)(D.a,{bsStyle:"success",header:"Erweiterte Informationen",children:Object(A.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[a("Umgebungsnutzung",null===t||void 0===t?void 0:t.umgebungsnutzung),a("Brachfl\xe4che",null===t||void 0===t?void 0:t.brachflaechen),a("Nutzungsaufgabe",null===t||void 0===t?void 0:t.jahr_brachflaeche),a("Bisherige Nutzung",null===t||void 0===t?void 0:t.bisherige_nutzung),a("Bestand Bebauung",null===t||void 0===t?void 0:t.bestand_bebauung),a("Bestand Versiegelung",null===t||void 0===t?void 0:t.versiegelung),a("\xc4u\xdfere Erschlie\xdfung",null===t||void 0===t?void 0:t.aeussere_erschliessung),a("Wohnlagen",null===t||void 0===t?void 0:t.wohnlagen),a("Klimainformationen",null===t||void 0===t?void 0:t.klimainformationen)]})},"standort")),(null===t||void 0===t?void 0:t.beschreibung_flaeche)&&o.push(Object(A.jsx)(D.a,{bsStyle:"warning",header:"Beschreibung",children:Object(A.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[null===t||void 0===t?void 0:t.beschreibung_flaeche.split("\n").map((function(e,n){return Object(A.jsx)("p",{children:e},"beschreibung.part"+n)})),a("Quelle",null===t||void 0===t?void 0:t.quelle),a("Stand",null===t||void 0===t?void 0:t.stand,(function(e){try{var n=new Date(e);return n.getDate()+"."+(n.getMonth()+1)+"."+n.getFullYear()}catch(t){return e}}))]})},"standort")),(null===t||void 0===t?void 0:t.notwendige_massnahmen)&&o.push(Object(A.jsx)(D.a,{bsStyle:"success",header:"Notwendige Ma\xdfnahmen / N\xe4chste Schritte",children:Object(A.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(A.jsx)("p",{children:null===t||void 0===t?void 0:t.notwendige_massnahmen})})},"standort")),((null===t||void 0===t?void 0:t.kategorie)||(null===t||void 0===t?void 0:t.potenzialart)||(null===t||void 0===t?void 0:t.entwicklungsstand)||(null===t||void 0===t?void 0:t.restriktionen)||(null===t||void 0===t?void 0:t.empfohlene_nutzungen_wohnen)||(null===t||void 0===t?void 0:t.wohneinheiten)||(null===t||void 0===t?void 0:t.entwicklungsaussichten)||(null===t||void 0===t?void 0:t.verfuegbarkeit)||(null===t||void 0===t?void 0:t.verwertbarkeit)||(null===t||void 0===t?void 0:t.handlungsprioritaet)||(null===t||void 0===t?void 0:t.empfohlene_nutzungen)||(null===t||void 0===t?void 0:t.revitalisierung)||(null===t||void 0===t?void 0:t.handlungsdruck))&&o.push(Object(A.jsx)(D.a,{bsStyle:"info",header:"Bewertung",children:Object(A.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[a("Kategorie",null===t||void 0===t?void 0:t.kategorie),a("Potenzialart",null===t||void 0===t?void 0:t.potenzialart),a("Entwicklungsstand",null===t||void 0===t?void 0:t.entwicklungsstand),a("Restriktionen / Hemnisse",null===t||void 0===t?void 0:t.restriktionen),a("Empfohlene Art der Wohnnutzung",null===t||void 0===t?void 0:t.empfohlene_nutzungen_wohnen),a("Anzahl m\xf6g. Wohneinheiten",null===t||void 0===t?void 0:t.wohneinheiten,(function(e){return Object(A.jsxs)("span",{children:[(null===t||void 0===t?void 0:t.anzahl_wohneinheiten)&&Object(A.jsxs)("span",{children:[" ",null===t||void 0===t?void 0:t.anzahl_wohneinheiten]})," ",e]})})),a("Entwicklungsaussichten",null===t||void 0===t?void 0:t.entwicklungsaussichten),a("Verf\xfcgbarkeit",null===t||void 0===t?void 0:t.verfuegbarkeit),a("Verwertbarkeit",null===t||void 0===t?void 0:t.verwertbarkeit),a("Handlungspriorit\xe4t (Verwaltung)",null===t||void 0===t?void 0:t.handlungsprioritaet),a("Empfohlene Nutzung",null===t||void 0===t?void 0:t.empfohlene_nutzungen),a("Revitalisierung",null===t||void 0===t?void 0:t.revitalisierung),a("Handlungsdruck",null===t||void 0===t?void 0:t.handlungsdruck)]})},"standort")),"true"===new URLSearchParams(window.location.href).get("showRawData")&&o.push(Object(A.jsx)(D.a,{bsStyle:"info",header:"Potenzialfl\xe4che (raw data): "+(null===t||void 0===t?void 0:t.nummer),children:Object(A.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(A.jsx)("pre",{children:JSON.stringify(t,null,2)})})},"standort")),Object(A.jsx)(E.a,{titleIconName:"info-circle",title:"Datenblatt: "+(null===t||void 0===t?void 0:t.bezeichnung),mainSection:Object(A.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(A.jsxs)("div",{children:[a("Nummer",null===t||void 0===t?void 0:t.nummer),a("Bezeichnung",null===t||void 0===t?void 0:t.bezeichnung),a("Fl\xe4chengr\xf6\xdfe",null===t||void 0===t?void 0:t.groesse,(function(e){return Object(A.jsxs)("span",{children:[e.toLocaleString()," m\xb2 (circa"," ",(Math.round(e/1e4*10)/10).toLocaleString()," ha)"]})})),a("Stadtbezirk(e)",null===t||void 0===t?void 0:t.stadtbezirke,(function(e){return e.join(", ")})),a("Quartier(e)",null===t||void 0===t?void 0:t.quartiere,(function(e){return e.join(", ")})),a("Eigent\xfcmer",null===t||void 0===t?void 0:t.eigentuemer,(function(e){return e.join(", ")}))]})}),subSections:o})}return null},M=(t(10),t(721),t(722),t(723),t(724),t(725),t(144)),J=t(11),R=t(21),W=t(51),G=t(88),U=t(224),H=t(119),q=t(391),V=t(234),Q=t(231),Y="0.2.1",Z=t(228),X=function(){var e=Object(i.useContext)(R.b).setAppMenuActiveMenuSection;return Object(A.jsxs)("div",{style:{fontSize:"11px"},children:[Object(A.jsx)("b",{children:"Hintergrundkarten"}),": Stadtkarte 2.0 \xa9 RVR | True Orthophoto 2020 \xa9 Stadt Wuppertal | Openmaptiles basierte Vectorkarte (hosted by cismet)"," ",Object(A.jsx)("a",{className:"pleaseRenderAsLink",onClick:function(){e("help"),G.scroller.scrollTo("Datengrundlage",{containerId:"myMenu"})},children:"(Details und Nutzungsbedingungen)"}),Object(A.jsx)("br",{}),Object(A.jsxs)("div",{children:[Object(A.jsxs)("b",{children:[document.title," v",Y]}),":"," ",Object(A.jsx)("a",{href:"https://cismet.de/",target:"_cismet",children:"cismet GmbH"})," ","auf Basis von"," ",Object(A.jsx)("a",{href:"http://leafletjs.com/",target:"_more",children:"Leaflet"})," ","und"," ",Object(A.jsxs)("a",{href:"https://cismet.de/#refs",target:"_cismet",children:["cids | react-cismap v",Z.a]})," ","|"," ",Object(A.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cismet.de/datenschutzerklaerung.html",children:"Datenschutzerkl\xe4rung (Privacy Policy)"})]})]})},$=function(){var e,n=Object(i.useContext)(R.b).setAppMenuActiveMenuSection,t=Object(i.useContext)(z.a),o=t.filterState,a=t.filterMode,r=t.filteredItems,l=t.shownFeatures,s=Object(i.useContext)(z.b),c=s.setFilterState,u=s.setFilterMode,d=Object(i.useContext)(z.a).items,g=[],v=[],b=Object(J.a)(d||[]);try{for(b.s();!(e=b.n()).done;){var p=e.value;g.includes(p.kampagne.bezeichnung)||(g.push(p.kampagne.bezeichnung),v.push({key:p.kampagne.bezeichnung,title:p.kampagne.bezeichnung,color:p.kampagne.color,icon:"square",iconPos:"pre"}))}}catch(j){b.e(j)}finally{b.f()}var f={mode:"list",resetedFilter:{kampagnen:g},filters:[{title:"Kampagnen",key:"kampagnen",icon:"layer-group",type:"checkBoxes",values:v,setAll:function(){c(Object(h.a)(Object(h.a)({},o),{},{kampagnen:g}))},setNone:function(){c(Object(h.a)(Object(h.a)({},o),{},{kampagnen:[]}))}}]};void 0===o&&void 0!==d&&0!==d.length&&c({kampagnen:g}),void 0===a&&void 0!==d&&u("kampagnen");return Object(A.jsx)(U.a,{menuIcon:"bars",menuTitle:"Meine Potenzialfl\xe4chen, Einstellungen und Kompaktanleitung",menuIntroduction:Object(A.jsxs)("span",{children:["Benutzen Sie die Auswahlm\xf6glichkeiten unter"," ",Object(A.jsx)(G.Link,{className:"useAClassNameToRenderProperLink",to:"filter",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return n("filter")},children:"Meine Potenzialfl\xe4chen"}),", um die in der Karte angezeigten Potenzialfl\xe4chen auf die f\xfcr Sie relevanten Themen zu beschr\xe4nken. \xdcber"," ",Object(A.jsx)(G.Link,{className:"useAClassNameToRenderProperLink",to:"settings",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return n("settings")},children:"Einstellungen"})," ","k\xf6nnen Sie die Darstellung der Hintergrundkarte an Ihre Interessen anpassen. W\xe4hlen Sie die"," ",Object(A.jsx)(G.Link,{className:"useAClassNameToRenderProperLink",to:"help",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return n("help")},children:"Kompaktanleitung"})," ","f\xfcr detailliertere Bedienungsinformationen."]}),menuSections:[Object(A.jsx)(H.a,{sectionKey:"filter",sectionTitle:function(){var e,n=(null===r||void 0===r?void 0:r.length)||0;return e=1===n?"Fl\xe4che":"Fl\xe4chen","Meine Potenzialfl\xe4chen (".concat(n," ").concat(e," gefunden, davon ").concat((null===l||void 0===l?void 0:l.length)||"0"," in der Karte)")}(),sectionBsStyle:"primary",sectionContent:Object(A.jsx)(q.a,{filterConfiguration:f})},"filter"),Object(A.jsx)(V.a,{skipFilterTitleSettings:!0,skipClusteringSettings:!0,skipSymbolsizeSetting:!0},"settings"),Object(A.jsx)(H.a,{sectionKey:"help",sectionTitle:"Kompaktanleitung",sectionBsStyle:"default",sectionContent:Object(A.jsx)(Q.a,{configs:Object(W.c)("Potenzialfl\xe4chen Online",undefined)})},"help")],menuFooter:Object(A.jsx)(X,{})})},ee=function(e){var n=e.filterState;return function(e){var t;return null===n||void 0===n||null===(t=n.kampagnen)||void 0===t?void 0:t.includes(e.kampagne.bezeichnung)}},ne=(t(16),function(e){var n=e.waiting,t=Object(i.useContext)(z.a).selectedFeature;return Object(A.jsxs)(C.a,{style:{zIndex:3e9},height:"200",size:"s",show:void 0!==n,keyboard:!1,children:[Object(A.jsx)(C.a.Header,{children:Object(A.jsxs)(C.a.Title,{children:[Object(A.jsx)(P.a,{name:null===n||void 0===n?void 0:n.icon})," ",null===n||void 0===n?void 0:n.title]})}),Object(A.jsx)(C.a.Body,{children:Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline"},children:[Object(A.jsx)(w.a,{type:"cylon",color:null===t||void 0===t?void 0:t.properties.color})," ",Object(A.jsx)("div",{style:{marginLeft:20},children:null===n||void 0===n?void 0:n.text})]})})]})}),te=t(72);Object(h.a)({},te.b).namedLayers.cismetLight={type:"vector",style:"https://omt.map-hosting.de/styles/cismet-light/style.json"};var ie="https://wupp-topicmaps-data.cismet.de",oe=new v.a("#2664D8"),ae="Potenzialflaechen.Online.Wuppertal",re=function(){var e=Object(d.a)(u.a.mark((function e(n){var t,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="GazDataForStories",i={},e.next=4,Object(f.c)(t,ie+"/data/3857/adressen.json");case 4:return i.adressen=e.sent,e.next=7,Object(f.c)(t,ie+"/data/3857/bezirke.json");case 7:return i.bezirke=e.sent,e.next=10,Object(f.c)(t,ie+"/data/3857/quartiere.json");case 10:return i.quartiere=e.sent,e.next=13,Object(f.c)(t,ie+"/data/3857/pois.json");case 13:return i.pois=e.sent,e.next=16,Object(f.c)(t,ie+"/data/3857/kitas.json");case 16:i.kitas=e.sent,o=Object(j.b)(i,["pois","kitas","bezirke","quartiere","adressen"]),n(o);case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var le=function(){var e=Object(i.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],a=Object(i.useState)([]),r=Object(s.a)(a,2),c=r[0],h=r[1],g=Object(i.useState)([]),f=Object(s.a)(g,2),j=f[0],O=f[1];Object(i.useEffect)((function(){O([].concat(Object(l.a)(c),Object(l.a)(t)))}),[t,c]),Object(i.useEffect)((function(){re(o)}),[]);var k,w=Object(i.useState)(),z=Object(s.a)(w,2),S=z[0],T=z[1],C=Object(i.useState)(),_=Object(s.a)(C,2),I=_[0],P=_[1],L=Object(i.useState)(),D=Object(s.a)(L,2),E=D[0],J=D[1],R=function(e){y.a.setItem("@"+ae+".auth.jwt",e),T(e)};return Object(i.useEffect)((function(){document.title="Potenzialfl\xe4chen Online"}),[]),Object(i.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.getItem("@"+ae+".auth.jwt");case 2:n=e.sent,R(n||void 0);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(i.useEffect)((function(){if(S){var e=new FormData;e.append("taskparams",new Blob([JSON.stringify({parameters:{daqKey:"potenzialflaechenGaz"}})],{type:"application/json"})),fetch("https://potenzialflaechen-online-api.cismet.de/actions/WUNDA_BLAU.dataAquisition/tasks?resultingInstanceType=result",{method:"POST",headers:{Authorization:"Bearer "+S},body:e}).then((function(e){e.status>=200&&e.status<300?e.json().then((function(e){if(e.res){var n=JSON.parse(e.res);Array.isArray(n)?h(n):h(JSON.parse(n.content))}else console.log("Probleme ber der Abfrage der Gazetteer-Daten")})):401===e.status&&(R(void 0),P({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){P()}),2500))})).catch((function(e){}))}}),[S]),k=-1===Object(M.a)()?[{title:"Stadtplan (grau)",mode:"default",layerKey:"stadtplan"},{title:"Stadtplan (Vektordaten light)",mode:"default",layerKey:"vector"},{title:"Amtliche Basiskarte",mode:"default",layerKey:"abkg"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}]:[{title:"Stadtplan",mode:"default",layerKey:"stadtplan"},{title:"Amtliche Basiskarte",mode:"default",layerKey:"abkg"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}],Object(A.jsxs)(p.c,{appKey:ae,backgroundConfigurations:{lbk:{layerkey:"rvrGrau@50|trueOrtho2020@40",src:"/images/rain-hazard-map-bg/ortho.png",title:"Luftbildkarte"},stadtplan:{layerkey:"rvrGrau@45",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"},vector:{layerkey:"cismetLight",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"},abkg:{layerkey:"bplan_abkg@70",src:"/images/rain-hazard-map-bg/citymap.png",title:"Amtliche Basiskarte"}},backgroundModes:k,referenceSystem:b.b.crs3857,mapEPSGCode:"3857",referenceSystemDefinition:b.b.proj4crs3857def,maskingPolygon:"POLYGON((668010.063156992 6750719.23021889,928912.612468322 6757273.20343972,930494.610325512 6577553.43685138,675236.835570551 6571367.64964125,668010.063156992 6750719.23021889))",getColorFromProperties:function(e){return e.kampagne.color},itemFilterFunction:ee,classKeyFunction:function(e){var n;return null===e||void 0===e||null===(n=e.kampagne)||void 0===n?void 0:n.bezeichnung},convertItemToFeature:function(e){var n,t,i=JSON.parse(JSON.stringify(e)),o=null===i||void 0===i?void 0:i.geojson,a=null===i||void 0===i?void 0:i.bezeichnung;i.color=null===i||void 0===i||null===(n=i.kampagne)||void 0===n?void 0:n.color;(null===i||void 0===i?void 0:i.beschreibung_flaeche)&&i.beschreibung_flaeche.split("\n")[0];var r={header:null===i||void 0===i||null===(t=i.kampagne)||void 0===t?void 0:t.bezeichnung,title:a,subtitle:"<html><div><b>Nummer:</b> "+(null===i||void 0===i?void 0:i.nummer)+"</div><div><b>Gr\xf6\xdfe:</b> "+parseInt(null===i||void 0===i?void 0:i.groesse,10).toLocaleString()+" m\xb2</div></html>"};return i.info=r,i.genericLinks=[{action:function(){J({icon:"file-pdf",title:"Steckbrief "+i.nummer+" wird erzeugt",text:"Nachdem der Steckbrief fertiggestellt wurde, startet automatisch der Download. (Dauert im Moment noch etwas l\xe4nger \xaf\\_(\u30c4)_/\xaf ) "});var e={parameters:{POTENZIALFLAECHE:parseInt(i.id)}},n=new FormData;n.append("taskparams",new Blob([JSON.stringify(e)],{type:"application/json"})),fetch("https://potenzialflaechen-online-api.cismet.de/actions/WUNDA_BLAU.potenzialflaecheReport/tasks?resultingInstanceType=result",{method:"POST",headers:{Authorization:"Bearer "+S},body:n}).then((function(e){e.status>=200&&e.status<300?e.json().then((function(e){if(e.res){for(var n=atob(e.res),t=new Array(n.length),o=0;o<n.length;o++)t[o]=n.charCodeAt(o);var a=new Uint8Array(t),r=new Blob([a],{type:"application/pdf"}),l=document.createElement("a");l.href=window.URL.createObjectURL(r),l.download="Steckbrief."+i.nummer+".pdf",document.body.appendChild(l),l.click(),document.body.removeChild(l)}else console.log("Probleme beim Erzeugen des Reports");J()})):401===e.status&&(J(),R(void 0),P({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){P()}),2500))})).catch((function(e){J()}))},iconname:"file-pdf",tooltip:"Steckbrief erzeugen"}],{text:a,type:"Feature",selected:!1,geometry:o,crs:(null===o||void 0===o?void 0:o.crs)||{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::25832"}},properties:i}},alwaysShowAllFeatures:!1,getFeatureStyler:function(){return function(e){var n,t,i=new v.a(e.properties.color);return!0===e.selected?(t=.85,n=oe):(t=.6,n=i.darken(.1)),{color:n,weight:2,opacity:.7,fillColor:i,fillOpacity:t}}},children:[void 0===S&&Object(A.jsx)(F,{setJWT:R,loginInfo:I,setLoginInfo:P},"login."),void 0!==S&&Object(A.jsx)(N,{logout:function(){R(void 0),P({color:"#69D2E7",text:"Sie wurden erfolgreich abgemeldet."}),setTimeout((function(){P()}),2500)},jwt:S}),Object(A.jsx)(ne,{waiting:E}),Object(A.jsx)(x.a,{mapStyle:{backgroundColor:"white"},gazData:j,homeZoom:13,maxZoom:22,locatorControl:!0,modalMenu:Object(A.jsx)($,{}),infoBox:Object(A.jsx)(m.a,{pixelwidth:350,config:{displaySecondaryInfoAction:!0,city:"Wuppertal",navigator:{noun:{singular:"Potenzialfl\xe4che",plural:"Potenzialfl\xe4chen"}},noCurrentFeatureTitle:"Keine Potenzialfl\xe4chen gefunden",noCurrentFeatureContent:""}}),secondaryInfo:Object(A.jsx)(K,{}),children:Object(A.jsx)(B,{jwt:S,setJWT:R,setLoginInfo:P})})]})},se=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,733)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,a=n.getLCP,r=n.getTTFB;t(e),i(e),o(e),a(e),r(e)}))};r.a.render(Object(A.jsx)(o.a.StrictMode,{children:Object(A.jsx)(le,{})}),document.getElementById("root")),se()}},[[727,1,2]]]);
//# sourceMappingURL=main.6b9dcd20.chunk.js.map