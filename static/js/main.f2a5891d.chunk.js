(this["webpackJsonppotenzialflaechen-online"]=this["webpackJsonppotenzialflaechen-online"]||[]).push([[0],{307:function(e,t,n){},406:function(e,t,n){},730:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),a=n(22),r=n.n(a),l=(n(406),n(123)),c=n(14),s=n(21),d=n.n(s),u=n(39),h=n(7),v=(n(287),n(43)),g=n.n(v),b=(n(289),n(15)),p=n.n(b),f=(n(290),n(122)),j=n(23),m=n(148),O=n(24),x=n(150),y=n(57),k=(n(306),n(307),function(e){var t=e.filterState;return function(e){var n;return null===t||void 0===t||null===(n=t.kampagnen)||void 0===n?void 0:n.includes(e.kampagne.bezeichnung)}}),z=n(180),w=n(735),S=n(116),C=n(10),T=n(25),I=n(4),L=function(e){var t=e.setJWT,n=void 0===t?function(e){console.log("you need to set the attribute setJWT in the <Login> component",e)}:t,o=e.loginInfo,a=e.setLoginInfo,r=void 0===a?function(){}:a,l=Object(i.useContext)(T.a).windowSize,s=Object(i.useRef)(),h=Object(i.useRef)(),v={overflowY:"auto",overflowX:"hidden",maxHeight:(null===l||void 0===l?void 0:l.height)||620},g=Object(i.useState)(""),b=Object(c.a)(g,2),f=b[0],j=b[1],m=Object(i.useState)(""),x=Object(c.a)(m,2),y=x[0],k=x[1],L=Object(i.useState)(!1),A=Object(c.a)(L,2),F=A[0],B=A[1];window.localforage=p.a;var _=function(e){p.a.setItem("@"+je+".auth.user",e),j(e)};Object(i.useEffect)((function(){Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getItem("@"+je+".auth.user");case 2:return t=e.sent,e.next=5,p.a.getItem("@"+je+".."+me+"."+Oe+".data");case 5:n=e.sent,B(null!==n&&void 0!==n),t&&_(t),(null===h||void 0===h?void 0:h.current)&&(h.current.focus(),h.current.select());case 9:case"end":return e.stop()}}),e)})))()}),[]);var P=function(){fetch("https://potenzialflaechen-online-api.cismet.de/users",{method:"GET",headers:{Authorization:"Basic "+btoa(f+"@WUNDA_BLAU:"+y),"Content-Type":"application/json"}}).then((function(e){e.status>=200&&e.status<300?e.json().then((function(e){var t=e.jwt;r({color:"#79BD9A",text:"Anmeldung erfolgreich. Daten werden geladen."}),setTimeout((function(){n(t),r()}),500)})):(r({color:"#FF8048",text:"Bei der Anmeldung ist ein Fehler aufgetreten. "}),setTimeout((function(){r()}),2500))})).catch((function(e){r({color:"#FF3030",text:"Bei der Anmeldung ist ein Fehler aufgetreten."}),setTimeout((function(){r()}),2500)}))};return Object(I.jsxs)(z.a,{style:{zIndex:3e9},height:"100%",size:"l",show:!0,keyboard:!1,children:[Object(I.jsx)(z.a.Header,{children:Object(I.jsx)(z.a.Title,{children:Object(I.jsx)("div",{children:Object(I.jsxs)("div",{children:[Object(I.jsx)(C.a,{name:"user"})," Anmeldung"]})})})}),Object(I.jsx)(z.a.Body,{style:v,id:"potenzialflaechen-online",children:Object(I.jsxs)(w.a,{children:[Object(I.jsxs)(w.a.Group,{controlId:"potenzialflaechen-online-login",children:[Object(I.jsx)(w.a.Label,{children:"WuNDa Benutzername"}),Object(I.jsx)(w.a.Control,{value:f,ref:h,onChange:function(e){_(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&s.current&&s.current.focus()},placeholder:"Login hier eingeben"})]}),Object(I.jsxs)(w.a.Group,{controlId:"potenzialflaechen-online-pass",children:[Object(I.jsx)(w.a.Label,{children:"Passwort"}),Object(I.jsx)(w.a.Control,{ref:s,value:y,onChange:function(e){k(e.target.value)},type:"password",placeholder:"Password",onKeyPress:function(e){"Enter"===e.key&&P()}})]}),Object(I.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"baseline",flexDirection:"row",justifyContent:"space-between"},children:[(null===o||void 0===o?void 0:o.text)&&Object(I.jsx)("div",{style:{margin:10,color:(null===o||void 0===o?void 0:o.color)||"black",maxWidth:200},children:Object(I.jsx)("b",{children:null===o||void 0===o?void 0:o.text})}),Object(I.jsx)("div",{style:{flexShrink:100}}),Object(I.jsxs)("div",{children:[!0===F&&Object(I.jsx)(S.a,{onClick:function(e){r({color:"#79BD9A",text:"Alte Daten werden aus dem Cahe \xfcbernommen."}),setTimeout((function(){n(O.a),r()}),500)},style:{margin:5,marginTop:30},variant:"secondary",children:"Offline arbeiten"}),Object(I.jsx)(S.a,{onClick:function(e){P()},style:{margin:5,marginTop:30},variant:"primary",children:"Anmeldung"})]})]})]})},"login")]})},A=n(16),F=function(e){var t,n,o,a,r=e.logout,l=e.jwt,c=Object(i.useContext)(T.a).windowSize,s=Object(i.useContext)(A.a).metaInformation;if(s){var d=s.time;t=new Date(d).toLocaleString()}if(l===O.a)n="Daten aus dem Cache",a="anmelden und Daten aktualisieren";else try{o=atob(l.split(".")[1]),n=JSON.parse(o).sub,a="abmelden"}catch(h){}var u=Object(I.jsxs)("div",{children:[Object(I.jsx)("b",{children:"Potenzialfl\xe4chen-Online"})," (",n+(void 0!==t?", "+t:""),")",Object(I.jsx)("div",{style:{float:"right",paddingRight:10},children:Object(I.jsx)("a",{style:{color:"#337ab7"},onClick:function(){r()},children:a})})]});return Object(I.jsx)("table",{style:{width:((null===c||void 0===c?void 0:c.width)||300)-54-12-38-12+"px",height:"30px",position:"absolute",left:54,top:12,zIndex:555},children:Object(I.jsx)("tbody",{children:Object(I.jsx)("tr",{children:Object(I.jsx)("td",{style:{textAlign:"center",verticalAlign:"middle",background:"#ffffff",color:"black",opacity:"0.9",paddingLeft:"10px"},children:u})})})})},B=n(389),_=n.n(B),P=function(e){var t=e.waiting,n=Object(i.useContext)(A.a).selectedFeature;return Object(I.jsxs)(z.a,{style:{zIndex:3e9},height:"200",size:"s",show:void 0!==t,keyboard:!1,children:[Object(I.jsx)(z.a.Header,{children:Object(I.jsxs)(z.a.Title,{children:[Object(I.jsx)(C.a,{name:null===t||void 0===t?void 0:t.icon})," ",null===t||void 0===t?void 0:t.title]})}),Object(I.jsx)(z.a.Body,{children:Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline"},children:[Object(I.jsx)(_.a,{type:"cylon",color:null===n||void 0===n?void 0:n.properties.color})," ",Object(I.jsx)("div",{style:{marginLeft:20},children:null===t||void 0===t?void 0:t.text})]})})]})},D=n(87),E=n(398),N=n(9),M=n(285),W=n(134),K=n(286),R=n.n(K),J=n(395),H=n.n(J),G=n(175),U=n(73),V=function(e){var t,n,i=JSON.parse(JSON.stringify(e)),o=null===i||void 0===i?void 0:i.geojson,a=null===i||void 0===i?void 0:i.bezeichnung;i.color=null===i||void 0===i||null===(t=i.kampagne)||void 0===t?void 0:t.color;var r={header:null===i||void 0===i||null===(n=i.kampagne)||void 0===n?void 0:n.bezeichnung,title:a,subtitle:"<html><div><b>Nummer:</b> "+(null===i||void 0===i?void 0:i.nummer)+"</div><div><b>Gr\xf6\xdfe:</b> "+parseInt(null===i||void 0===i?void 0:i.groesse,10).toLocaleString()+" m\xb2</div></html>"};return i.info=r,{id:i.id,text:a,type:"Feature",selected:!1,geometry:o,crs:(null===o||void 0===o?void 0:o.crs)||{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::25832"}},properties:i}};R.a.extend(H.a);var Y=function(e){var t=e.jwt,n=e.setJWT,o=e.setLoginInfo,a=Object(i.useContext)(j.b).zoomToFeature,r=Object(i.useContext)(A.b),l=r.setItems,c=r.setMetaInformation;return Object(i.useEffect)((function(){void 0!==t?Object(O.c)(ve,me,t,Oe).then((function(e){var t,n=R()(e.time,"YYYY-MM-DD hh:mm:ss").toDate(),i=[],o=Object(N.a)(e.data);try{for(o.s();!(t=o.n()).done;){var a=t.value;i.push(V(a))}}catch(v){o.e(v)}finally{o.f()}for(var r=Object(U.b)(i),s=0,d=function(){var t=h[u],n=Object(U.c)(r,t,i,(function(e){return e.id!==t.id})),o=[];if(n.length>0){var a,l=Object(M.a)(t),c=Object(N.a)(n);try{for(c.s();!(a=c.n()).done;){var d=a.value,g=void 0,b=1;try{b=((g=Object(W.a)(t.geometry,d.geometry))?Object(M.a)(g):0)/l}catch(p){console.log("error during intersection ",p),console.log("error during intersection ",g)}b>.1&&o.push({id:d.properties.id,kampagne:d.properties.kampagne})}}catch(v){c.e(v)}finally{c.f()}}e.data[s].overlapping=o,++s},u=0,h=i;u<h.length;u++)d();l(e.data),c({time:n})}),(function(e){401===e.status&&(n(void 0),o({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){o()}),2500)),l([]),c()})).catch((function(e){console.log("xxx error ",e)})):l([])}),[t]),Object(I.jsx)(G.a,{featureClickHandler:function(e){e.originalEvent.stopImmediatePropagation(),!0===e.target.feature.selected&&a(e.target.feature)}})},q=n(20),Q=n(58),Z=n(90),X=n(224),$=n(120),ee=n(399),te=n(233),ne=n(231),ie="0.4.1",oe=n(228),ae=function(){var e=Object(i.useContext)(q.b).setAppMenuActiveMenuSection;return Object(I.jsxs)("div",{style:{fontSize:"11px"},children:[Object(I.jsx)("b",{children:"Hintergrundkarten"}),": Stadtkarte 2.0 \xa9 RVR | True Orthophoto 2020 \xa9 Stadt Wuppertal | Openmaptiles basierte Vectorkarte (hosted by cismet)"," ",Object(I.jsx)("a",{className:"pleaseRenderAsLink",onClick:function(){e("help"),Z.scroller.scrollTo("Datengrundlage",{containerId:"myMenu"})},children:"(Details und Nutzungsbedingungen)"}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{children:[Object(I.jsxs)("b",{children:[document.title," v",ie]}),":"," ",Object(I.jsx)("a",{href:"https://cismet.de/",target:"_cismet",children:"cismet GmbH"})," ","auf Basis von"," ",Object(I.jsx)("a",{href:"http://leafletjs.com/",target:"_more",children:"Leaflet"})," ","und"," ",Object(I.jsxs)("a",{href:"https://cismet.de/#refs",target:"_cismet",children:["cids | react-cismap v",oe.a]})," ","|"," ",Object(I.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://cismet.de/datenschutzerklaerung.html",children:"Datenschutzerkl\xe4rung (Privacy Policy)"})]})]})},re=function(){var e,t=Object(i.useContext)(q.b).setAppMenuActiveMenuSection,n=Object(i.useContext)(A.a),o=n.filterState,a=n.filterMode,r=n.filteredItems,l=n.shownFeatures,c=Object(i.useContext)(A.b),s=c.setFilterState,d=c.setFilterMode,u=Object(i.useContext)(A.a).items,v=[],g=[],b=Object(N.a)(u||[]);try{for(b.s();!(e=b.n()).done;){var p=e.value;v.includes(p.kampagne.bezeichnung)||(v.push(p.kampagne.bezeichnung),g.push({key:p.kampagne.bezeichnung,title:p.kampagne.bezeichnung,color:p.kampagne.color,icon:"square",iconPos:"pre",order:p.kampagne.order_by}))}}catch(x){b.e(x)}finally{b.f()}g.sort((function(e,t){return parseInt(e.order)-parseInt(t.order)})),v=[];for(var f=0,j=g;f<j.length;f++){var m=j[f];v.push(m.key)}var O={mode:"list",resetedFilter:{kampagnen:v},filters:[{title:"Kampagnen",key:"kampagnen",icon:"layer-group",type:"checkBoxes",values:g,setAll:function(){s(Object(h.a)(Object(h.a)({},o),{},{kampagnen:v}))},setNone:function(){s(Object(h.a)(Object(h.a)({},o),{},{kampagnen:[]}))}}]};void 0===o&&void 0!==u&&0!==u.length&&s({kampagnen:v}),void 0===a&&void 0!==u&&d("kampagnen");return Object(I.jsx)(X.a,{menuIcon:"bars",menuTitle:"Meine Potenzialfl\xe4chen, Einstellungen und Kompaktanleitung",menuIntroduction:Object(I.jsxs)("span",{children:["Benutzen Sie die Auswahlm\xf6glichkeiten unter"," ",Object(I.jsx)(Z.Link,{className:"useAClassNameToRenderProperLink",to:"filter",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return t("filter")},children:"Meine Potenzialfl\xe4chen"}),", um die in der Karte angezeigten Potenzialfl\xe4chen auf die f\xfcr Sie relevanten Themen zu beschr\xe4nken. \xdcber"," ",Object(I.jsx)(Z.Link,{className:"useAClassNameToRenderProperLink",to:"settings",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return t("settings")},children:"Einstellungen"})," ","k\xf6nnen Sie die Darstellung der Hintergrundkarte an Ihre Interessen anpassen. W\xe4hlen Sie die"," ",Object(I.jsx)(Z.Link,{className:"useAClassNameToRenderProperLink",to:"help",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return t("help")},children:"Kompaktanleitung"})," ","f\xfcr detailliertere Bedienungsinformationen."]}),menuSections:[Object(I.jsx)($.a,{sectionKey:"filter",sectionTitle:function(){var e,t=(null===r||void 0===r?void 0:r.length)||0;return e=1===t?"Fl\xe4che":"Fl\xe4chen","Meine Potenzialfl\xe4chen (".concat(t," ").concat(e," gefunden, davon ").concat((null===l||void 0===l?void 0:l.length)||"0"," in der Karte)")}(),sectionBsStyle:"primary",sectionContent:Object(I.jsx)(ee.a,{filterConfiguration:O})},"filter"),Object(I.jsx)(te.a,{skipFilterTitleSettings:!0,skipClusteringSettings:!0,skipSymbolsizeSetting:!0},"settings"),Object(I.jsx)($.a,{sectionKey:"help",sectionTitle:"Kompaktanleitung",sectionBsStyle:"default",sectionContent:Object(I.jsx)(ne.a,{configs:Object(Q.c)("Potenzialfl\xe4chen Online",undefined)})},"help")],menuFooter:Object(I.jsx)(ae,{})})},le=n(107),ce=n(401),se=function(){var e=Object(i.useContext)(A.a),t=e.selectedFeature,n=(e.items,null===t||void 0===t?void 0:t.properties);if(void 0!==n){var o,a=[],r=function(e,t,n){return t&&void 0===n&&!1===Array.isArray(t)?Object(I.jsxs)("div",{children:[Object(I.jsxs)("b",{children:[e,":"]})," ",t]}):t&&void 0===n&&!0===Array.isArray(t)?Object(I.jsxs)("div",{children:[Object(I.jsxs)("b",{children:[e,":"]})," ",t.join(", ")]}):t&&void 0!==n?Object(I.jsxs)("div",{children:[Object(I.jsxs)("b",{children:[e,":"]})," ",n(t)]}):void 0};return((null===n||void 0===n?void 0:n.lagebewertung_verkehr)||(null===n||void 0===n?void 0:n.oepnv)||(null===n||void 0===n?void 0:n.naehe_zu)||(null===n||void 0===n?void 0:n.siedlungsraeumliche_lage)||(null===n||void 0===n?void 0:n.topografie)||(null===n||void 0===n?void 0:n.hang))&&a.push(Object(I.jsx)(le.a,{bsStyle:"info",header:"Lagebeschreibung",children:Object(I.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[r("Lagebewertung Verkehr",null===n||void 0===n?void 0:n.lagebewertung_verkehr),r("\xd6PNV Qualit\xe4t",null===n||void 0===n?void 0:n.oepnv),r("N\xe4he zu",null===n||void 0===n?void 0:n.naehe_zu),r("Siedlungsr\xe4umliche Lage",null===n||void 0===n?void 0:n.siedlungsraeumliche_lage),r("Topografie",null===n||void 0===n?void 0:n.topografie),r("Hangrichtung",null===n||void 0===n?void 0:n.hang)]})},"standort")),((null===n||void 0===n?void 0:n.regionalplan)||(null===n||void 0===n?void 0:n.bplaene)||(null===n||void 0===n?void 0:n.festsetzungen_bplan)||(null===n||void 0===n?void 0:n.bauordnungsrecht_genehmigung)||(null===n||void 0===n?void 0:n.bauordnungsrecht_genehmigung)||(null===n||void 0===n?void 0:n.stand_bauordnungsrecht))&&a.push(Object(I.jsx)(le.a,{bsStyle:"danger",header:Object(I.jsx)("span",{children:"Planungsrecht / Bauplanungsrecht / Bauordnungsrecht"}),children:Object(I.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[r("Regionalplan",null===n||void 0===n?void 0:n.regionalplan),r("Bebauungspl\xe4ne",null===n||void 0===n?void 0:n.bplaene),r("Festsetzungen",null===n||void 0===n?void 0:n.festsetzungen_bplan),r("Bauordnungsrecht (Stand)",null===n||void 0===n?void 0:n.stand_bauordnungsrecht)]})},"standort")),((null===n||void 0===n?void 0:n.umgebungsnutzung)||(null===n||void 0===n?void 0:n.brachflaechen)||(null===n||void 0===n?void 0:n.jahr_brachflaeche)||(null===n||void 0===n?void 0:n.bisherige_nutzung)||(null===n||void 0===n?void 0:n.bestand_bebauung)||(null===n||void 0===n?void 0:n.versiegelung)||(null===n||void 0===n?void 0:n.aeussere_erschliessung)||(null===n||void 0===n?void 0:n.wohnlagen)||(null===n||void 0===n?void 0:n.klimainformationen))&&a.push(Object(I.jsx)(le.a,{bsStyle:"success",header:"Erweiterte Informationen",children:Object(I.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[r("Umgebungsnutzung",null===n||void 0===n?void 0:n.umgebungsnutzung),r("Brachfl\xe4che",null===n||void 0===n?void 0:n.brachflaechen),r("Nutzungsaufgabe",null===n||void 0===n?void 0:n.jahr_brachflaeche),r("Bisherige Nutzung",null===n||void 0===n?void 0:n.bisherige_nutzung),r("Bestand Bebauung",null===n||void 0===n?void 0:n.bestand_bebauung),r("Bestand Versiegelung",null===n||void 0===n?void 0:n.versiegelung),r("\xc4u\xdfere Erschlie\xdfung",null===n||void 0===n?void 0:n.aeussere_erschliessung),r("Wohnlagen",null===n||void 0===n?void 0:n.wohnlagen),r("Klimainformationen",null===n||void 0===n?void 0:n.klimainformationen)]})},"standort")),(null===n||void 0===n?void 0:n.beschreibung_flaeche)&&a.push(Object(I.jsx)(le.a,{bsStyle:"warning",header:"Beschreibung",children:Object(I.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[null===n||void 0===n?void 0:n.beschreibung_flaeche.split("\n").map((function(e,t){return Object(I.jsx)("p",{children:e},"beschreibung.part"+t)})),r("Quelle",null===n||void 0===n?void 0:n.quelle),r("Stand",null===n||void 0===n?void 0:n.stand,(function(e){try{var t=new Date(e);return t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()}catch(n){return e}}))]})},"standort")),(null===n||void 0===n?void 0:n.notwendige_massnahmen)&&a.push(Object(I.jsx)(le.a,{bsStyle:"success",header:"Notwendige Ma\xdfnahmen / N\xe4chste Schritte",children:Object(I.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(I.jsx)("p",{children:null===n||void 0===n?void 0:n.notwendige_massnahmen})})},"standort")),((null===n||void 0===n?void 0:n.kategorie)||(null===n||void 0===n?void 0:n.potenzialart)||(null===n||void 0===n?void 0:n.entwicklungsstand)||(null===n||void 0===n?void 0:n.restriktionen)||(null===n||void 0===n?void 0:n.empfohlene_nutzungen_wohnen)||(null===n||void 0===n?void 0:n.wohneinheiten)||(null===n||void 0===n?void 0:n.entwicklungsaussichten)||(null===n||void 0===n?void 0:n.verfuegbarkeit)||(null===n||void 0===n?void 0:n.verwertbarkeit)||(null===n||void 0===n?void 0:n.handlungsprioritaet)||(null===n||void 0===n?void 0:n.empfohlene_nutzungen)||(null===n||void 0===n?void 0:n.revitalisierung)||(null===n||void 0===n?void 0:n.handlungsdruck))&&a.push(Object(I.jsx)(le.a,{bsStyle:"info",header:"Bewertung",children:Object(I.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[r("Kategorie",null===n||void 0===n?void 0:n.kategorie),r("Potenzialart",null===n||void 0===n?void 0:n.potenzialart),r("Entwicklungsstand",null===n||void 0===n?void 0:n.entwicklungsstand),r("Restriktionen / Hemnisse",null===n||void 0===n?void 0:n.restriktionen),r("Empfohlene Art der Wohnnutzung",null===n||void 0===n?void 0:n.empfohlene_nutzungen_wohnen),r("Anzahl m\xf6g. Wohneinheiten",null===n||void 0===n?void 0:n.wohneinheiten,(function(e){return Object(I.jsxs)("span",{children:[(null===n||void 0===n?void 0:n.anzahl_wohneinheiten)&&Object(I.jsxs)("span",{children:[" ",null===n||void 0===n?void 0:n.anzahl_wohneinheiten]})," ",e]})})),r("Entwicklungsaussichten",null===n||void 0===n?void 0:n.entwicklungsaussichten),r("Verf\xfcgbarkeit",null===n||void 0===n?void 0:n.verfuegbarkeit),r("Verwertbarkeit",null===n||void 0===n?void 0:n.verwertbarkeit),r("Handlungspriorit\xe4t (Verwaltung)",null===n||void 0===n?void 0:n.handlungsprioritaet),r("Empfohlene Nutzung",null===n||void 0===n?void 0:n.empfohlene_nutzungen),r("Revitalisierung",null===n||void 0===n?void 0:n.revitalisierung),r("Handlungsdruck",null===n||void 0===n?void 0:n.handlungsdruck)]})},"standort")),null!==new URLSearchParams(window.location.href).get("showRawData")&&a.push(Object(I.jsx)(le.a,{bsStyle:"info",header:"Potenzialfl\xe4che (raw data): "+(null===n||void 0===n?void 0:n.nummer),children:Object(I.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(I.jsx)("pre",{children:JSON.stringify(n,null,2)})})},"standort")),Object(I.jsx)(ce.a,{titleIconName:"info-circle",title:"Datenblatt: "+(null===n||void 0===n?void 0:n.bezeichnung),mainSection:Object(I.jsx)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:Object(I.jsxs)("div",{children:[r("Nummer",null===n||void 0===n?void 0:n.nummer),r("Bezeichnung",null===n||void 0===n?void 0:n.bezeichnung),r("Kampagne",null===n||void 0===n||null===(o=n.kampagne)||void 0===o?void 0:o.bezeichnung),r("Fl\xe4chengr\xf6\xdfe",null===n||void 0===n?void 0:n.groesse,(function(e){return Object(I.jsxs)("span",{children:[e.toLocaleString()," m\xb2 (circa"," ",(Math.round(e/1e4*10)/10).toLocaleString()," ha)"]})})),r("Stadtbezirk(e)",null===n||void 0===n?void 0:n.stadtbezirke,(function(e){return e.join(", ")})),r("Quartier(e)",null===n||void 0===n?void 0:n.quartiere,(function(e){return e.join(", ")})),r("Eigent\xfcmer",null===n||void 0===n?void 0:n.eigentuemer,(function(e){return e.join(", ")}))]})}),subSections:a})}return null},de=n(400),ue=n(397),he=function(e){var t,n=Object(i.useContext)(A.a),o=Object(i.useContext)(A.b).setSelectedFeatureByPredicate,a=(n.shownFeatures,n.selectedFeature),r=(n.allFeatures,n.filteredItems,n.filterState),l=[],c=1,s=k({filterState:r});if(null===a||void 0===a||null===(t=a.properties)||void 0===t?void 0:t.overlapping){var d,u=Object(N.a)(a.properties.overlapping);try{var v=function(){var e=d.value;s(e)&&l.push(Object(I.jsx)("div",{style:{width:350,paddingBottom:3,paddingLeft:5*c,cursor:"pointer"},onClick:function(){o((function(t){var n;return(null===t||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.id)===e.id}))},children:Object(I.jsx)(ue.a,{headerColor:e.kampagne.color,content:e.kampagne.bezeichnung})})),c++};for(u.s();!(d=u.n()).done;)v()}catch(g){u.e(g)}finally{u.f()}}return Object(I.jsx)("div",{children:Object(I.jsx)(de.a,Object(h.a)(Object(h.a)({},e),{},{secondaryInfoBoxElements:l}))})};Object(h.a)({},y.b).namedLayers.cismetLight={type:"vector",style:"https://omt.map-hosting.de/styles/cismet-light/style.json"};new g.a("#2664D8");var ve="Potenzialflaechen.Online.Wuppertal";var ge=function(e){var t=e.gazData,n=e.jwt,o=e.setJWT,a=e.setLoginInfo,r=Object(i.useContext)(A.b),l=r.setSelectedFeatureByPredicate,c=r.setFilterState,s=Object(i.useContext)(j.b).zoomToFeature,d=Object(i.useContext)(j.a).history,u=Object(i.useContext)(q.b),h=u.setAppMenuActiveMenuSection,v=u.setAppMenuVisible;return Object(i.useEffect)((function(){var e=function(e){if(!0===(null!=new URLSearchParams(e).get("cleanStart"))){var t=Object(D.b)(e,"cleanStart");d.push(t),c({kampagnen:[]}),v(!0),setTimeout((function(){h("filter")}),50)}};return e(d.location.search),d.listen((function(){e(d.location.search)}))}),[d,c,v,h]),Object(I.jsx)(E.a,{mapStyle:{backgroundColor:"white"},gazData:t,homeZoom:13,maxZoom:22,locatorControl:!0,modalMenu:Object(I.jsx)(re,{}),infoBox:Object(I.jsx)(he,{pixelwidth:350,config:{displaySecondaryInfoAction:!0,city:"Wuppertal",navigator:{noun:{singular:"Potenzialfl\xe4che",plural:"Potenzialfl\xe4chen"}},noCurrentFeatureTitle:"Keine Potenzialfl\xe4chen gefunden",noCurrentFeatureContent:""}}),secondaryInfo:Object(I.jsx)(se,{}),gazetteerHitTrigger:function(e){var t,n;Array.isArray(e)&&(null===(t=e[0])||void 0===t||null===(n=t.more)||void 0===n?void 0:n.pid)&&l((function(t){try{var n=parseInt(t.properties.id)===e[0].more.pid;return!0===n&&s(t),n}catch(i){return!1}}))},children:Object(I.jsx)(Y,{jwt:n,setJWT:o,setLoginInfo:a})})},be=function(e){var t=e.setWaiting,n=e.item,i=e.jwt,o=e.setJWT,a=e.setLoginInfo;return{action:function(){if(i&&i!==O.a){t({icon:"file-pdf",title:"Steckbrief "+n.nummer+" wird erzeugt",text:"Nachdem der Steckbrief fertiggestellt wurde, startet automatisch der Download."});var e={parameters:{POTENZIALFLAECHE:parseInt(n.id)}},r=new FormData;r.append("taskparams",new Blob([JSON.stringify(e)],{type:"application/json"})),fetch("https://potenzialflaechen-online-api.cismet.de/actions/WUNDA_BLAU.potenzialflaecheReport/tasks?resultingInstanceType=result",{method:"POST",headers:{Authorization:"Bearer "+i},body:r}).then((function(e){e.status>=200&&e.status<300?e.json().then((function(e){if(e.res){for(var i=atob(e.res),o=new Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);var r=new Uint8Array(o),l=new Blob([r],{type:"application/pdf"}),c=document.createElement("a");c.href=window.URL.createObjectURL(l),c.download="Steckbrief."+n.nummer+".pdf",document.body.appendChild(c),c.click(),document.body.removeChild(c)}else console.log("Probleme beim Erzeugen des Reports");t()})):401===e.status&&(t(),o(void 0),a({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){a()}),2500))})).catch((function(e){t()}))}else t({icon:"file-pdf",title:"Steckbrief "+n.nummer,text:"Steckbriefe k\xf6nnen im Offline Modus leider nicht erzeugt werden. \xaf\\_(\u30c4)_/\xaf "}),setTimeout((function(){t()}),2500)},iconname:"file-pdf",tooltip:"Steckbrief erzeugen"+(i===O.a?" (Im Offline Modus nicht m\xf6glich)":"")}};Object(h.a)({},y.b).namedLayers.cismetLight={type:"vector",style:"https://omt.map-hosting.de/styles/cismet-light/style.json"};var pe="https://wupp-topicmaps-data.cismet.de",fe=new g.a("#2664D8"),je="Potenzialflaechen.Online.Wuppertal",me="https://potenzialflaechen-online-api.cismet.de",Oe="potenzialflaechen",xe=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="GazDataForStories",i={},e.next=4,Object(O.e)(n,pe+"/data/3857/adressen.json");case 4:return i.adressen=e.sent,e.next=7,Object(O.e)(n,pe+"/data/3857/bezirke.json");case 7:return i.bezirke=e.sent,e.next=10,Object(O.e)(n,pe+"/data/3857/quartiere.json");case 10:return i.quartiere=e.sent,e.next=13,Object(O.e)(n,pe+"/data/3857/pois.json");case 13:return i.pois=e.sent,e.next=16,Object(O.e)(n,pe+"/data/3857/kitas.json");case 16:i.kitas=e.sent,o=Object(x.b)(i,["pois","kitas","bezirke","quartiere","adressen"]),t(o);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var ye=function(){var e=Object(i.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],a=Object(i.useState)([]),r=Object(c.a)(a,2),s=r[0],h=r[1],v=Object(i.useState)([]),b=Object(c.a)(v,2),x=b[0],y=b[1];Object(i.useEffect)((function(){y([].concat(Object(l.a)(s||[]),Object(l.a)(n)))}),[n,s]),Object(i.useEffect)((function(){xe(o),document.title="Potenzialfl\xe4chen-Online Wuppertal"}),[]);var z,w=Object(i.useState)(),S=Object(c.a)(w,2),C=S[0],T=S[1],A=Object(i.useState)(),B=Object(c.a)(A,2),_=B[0],D=B[1],E=Object(i.useState)(),N=Object(c.a)(E,2),M=N[0],W=N[1],K=function(e){p.a.setItem("@"+je+".auth.jwt",e),T(e)};return Object(i.useEffect)((function(){Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getItem("@"+je+".auth.jwt");case 2:t=e.sent,K(t||void 0);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(i.useEffect)((function(){C?Object(O.c)(je,me,C,"potenzialflaechenGaz").then((function(e){h(e.data)}),(function(e){401===e.status&&(K(void 0),D({color:"#F9D423",text:"Bitte melden Sie sich erneut an."}),setTimeout((function(){D()}),2500)),h([])})).catch((function(e){console.log("xxx error ",e)})):h([])}),[C]),z=-1===Object(m.a)()?[{title:"Stadtplan (grau)",mode:"default",layerKey:"stadtplan"},{title:"Stadtplan (Vektordaten light)",mode:"default",layerKey:"vector"},{title:"Amtliche Basiskarte",mode:"default",layerKey:"abkg"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}]:[{title:"Stadtplan",mode:"default",layerKey:"stadtplan"},{title:"Amtliche Basiskarte",mode:"default",layerKey:"abkg"},{title:"Luftbildkarte",mode:"default",layerKey:"lbk"}],Object(I.jsxs)(j.c,{appKey:je,backgroundConfigurations:{lbk:{layerkey:"rvrGrau@50|trueOrtho2020@40",src:"/images/rain-hazard-map-bg/ortho.png",title:"Luftbildkarte"},stadtplan:{layerkey:"rvrGrau@45",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"},vector:{layerkey:"cismetLight",src:"/images/rain-hazard-map-bg/citymap.png",title:"Stadtplan"},abkg:{layerkey:"bplan_abkg@70",src:"/images/rain-hazard-map-bg/citymap.png",title:"Amtliche Basiskarte"}},backgroundModes:z,referenceSystem:f.b.crs3857,mapEPSGCode:"3857",referenceSystemDefinition:f.b.proj4crs3857def,maskingPolygon:"POLYGON((668010.063156992 6750719.23021889,928912.612468322 6757273.20343972,930494.610325512 6577553.43685138,675236.835570551 6571367.64964125,668010.063156992 6750719.23021889))",getColorFromProperties:function(e){return e.kampagne.color},itemFilterFunction:k,classKeyFunction:function(e){var t;return null===e||void 0===e||null===(t=e.kampagne)||void 0===t?void 0:t.bezeichnung},convertItemToFeature:function(e){var t=V(e);return t.properties.genericLinks=[be({setWaiting:W,item:t.properties,jwt:C,setJWT:K,setLoginInfo:D})],t},alwaysShowAllFeatures:!1,getFeatureStyler:function(){return function(e){var t,n,i=new g.a(e.properties.color);return!0===e.selected?(n=.85,t=fe):(n=.6,t=i.darken(.1)),{color:t,weight:2,opacity:.7,fillColor:i,fillOpacity:n}}},children:[void 0===C&&Object(I.jsx)(L,{setJWT:K,loginInfo:_,setLoginInfo:D},"login."),void 0!==C&&Object(I.jsx)(F,{logout:function(){K(void 0),D({color:"#69D2E7",text:"Sie wurden erfolgreich abgemeldet."}),setTimeout((function(){D()}),2500)},jwt:C}),Object(I.jsx)(P,{waiting:M}),Object(I.jsx)(ge,{gazData:x,jwt:C,setJWT:K,setLoginInfo:D})]})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,736)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),a(e),r(e)}))};r.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(ye,{})}),document.getElementById("root")),ke()}},[[730,1,2]]]);
//# sourceMappingURL=main.f2a5891d.chunk.js.map