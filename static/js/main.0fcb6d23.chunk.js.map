{"version":3,"sources":["components/filterFunction.js","components/LoginForm.js","components/TitleControl.js","components/Waiting.js","components/FeatureCollection.js","version.js","components/MenuFooter.js","components/Menu.js","components/SecondaryInfo.js","PotenzialflaechenOnlineMap.js","App.js","reportWebVitals.js","index.js"],"names":["itemFilterFunction","filterState","item","kampagnen","includes","kampagne","bezeichnung","LoginForm","setJWT","jwt","console","log","loginInfo","setLoginInfo","windowSize","useContext","ResponsiveTopicMapContext","pwFieldRef","useRef","userFieldRef","modalBodyStyle","overflowY","overflowX","maxHeight","height","useState","user","_setUser","pw","setPw","window","localforage","setUser","setItem","appKey","useEffect","a","getItem","userInCache","current","focus","select","login","fetch","method","headers","Authorization","btoa","then","response","status","json","responseWithJWT","color","text","setTimeout","catch","err","Modal","style","zIndex","size","show","keyboard","Header","Title","Icon","name","Body","id","Form","Group","controlId","Label","Control","value","ref","onChange","e","target","onKeyPress","event","key","placeholder","type","width","display","alignItems","flexDirection","justifyContent","margin","flexShrink","Button","onClick","marginTop","variant","jwtPayload","logout","atob","split","JSON","parse","sub","titleContent","float","paddingRight","position","left","top","textAlign","verticalAlign","background","opacity","paddingLeft","Waiting","waiting","selectedFeature","FeatureCollectionContext","undefined","icon","title","properties","marginLeft","md5ActionFetchDAQ","prefix","apiUrl","daqKey","md5Key","cachePrefix","dataKey","timeKey","md5InCache","taskParameters","parameters","md5","fd","FormData","append","Blob","stringify","body","content","res","result","potenzialflaechen","time","Promise","resolve","reject","desc","exception","FC","zoomToFeature","TopicMapDispatchContext","setItems","FeatureCollectionDispatchContext","problem","FeatureCollection","featureClickHandler","originalEvent","stopImmediatePropagation","Math","round","random","feature","selected","APPERSION","Footer","setAppMenuActiveMenuSection","UIDispatchContext","fontSize","className","scroller","scrollTo","containerId","document","href","reactCismapVersion","rel","MyMenu","filterMode","filteredItems","shownFeatures","setFilterState","setFilterMode","items","kampagnenValues","push","iconPos","filterConfiguration","mode","resetedFilter","filters","values","setAll","setNone","length","ModalApplicationMenu","menuIcon","menuTitle","menuIntroduction","to","smooth","delay","menuSections","Section","sectionKey","sectionTitle","term","count","getFilterHeader","sectionBsStyle","sectionContent","FilterPanel","DefaultSettingsPanel","skipFilterTitleSettings","skipClusteringSettings","skipSymbolsizeSetting","ConfigurableDocBlocks","configs","getSimpleHelpForTM","menuFooter","MenuFooter","InfoPanel","potenzialflaeche","subSections","valFunc","Array","isArray","join","lagebewertung_verkehr","oepnv","naehe_zu","siedlungsraeumliche_lage","topografie","hang","SecondaryInfoPanelSection","bsStyle","header","padding","paddingTop","bplaene","festsetzungen_bplan","bauordnungsrecht_genehmigung","stand_bauordnungsrecht","regionalplan","umgebungsnutzung","brachflaechen","jahr_brachflaeche","bisherige_nutzung","bestand_bebauung","versiegelung","aeussere_erschliessung","wohnlagen","klimainformationen","beschreibung_flaeche","map","part","index","quelle","stand","d","date","Date","getDate","getMonth","getFullYear","notwendige_massnahmen","kategorie","potenzialart","entwicklungsstand","restriktionen","empfohlene_nutzungen_wohnen","wohneinheiten","entwicklungsaussichten","verfuegbarkeit","verwertbarkeit","handlungsprioritaet","empfohlene_nutzungen","revitalisierung","handlungsdruck","t","anzahl_wohneinheiten","URLSearchParams","location","get","nummer","SecondaryInfo","titleIconName","mainSection","groesse","toLocaleString","stadtbezirke","sb","quartiere","q","eigentuemer","defaultLayerConf","namedLayers","cismetLight","Color","PotenzialflaechenOnlineMap","gazData","setSelectedFeatureByPredicate","TopicMapComponent","mapStyle","backgroundColor","homeZoom","maxZoom","locatorControl","modalMenu","infoBox","GenericInfoBoxFromFeature","pixelwidth","config","displaySecondaryInfoAction","city","navigator","noun","singular","plural","noCurrentFeatureTitle","noCurrentFeatureContent","secondaryInfo","gazetteerHitTrigger","hits","more","pid","parseInt","host","selectionColor","getGazData","setStaticGazData","sources","md5FetchText","adressen","bezirke","pois","kitas","getGazDataForTopicIds","App","staticGazData","dynGazData","setDynGazData","setGazData","backgroundModes","_setJWT","setWaiting","jwtInCache","gaz","getInternetExplorerVersion","layerKey","TopicMapContextProvider","backgroundConfigurations","lbk","layerkey","src","stadtplan","vector","abkg","referenceSystem","MappingConstants","crs3857","mapEPSGCode","referenceSystemDefinition","proj4crs3857def","maskingPolygon","getColorFromProperties","classKeyFunction","convertItemToFeature","_item","geometry","geojson","info","subtitle","genericLinks","action","POTENZIALFLAECHE","byteCharacters","byteNumbers","i","charCodeAt","byteArray","Uint8Array","blob","link","createElement","URL","createObjectURL","download","appendChild","click","removeChild","iconname","tooltip","crs","alwaysShowAllFeatures","getFeatureStyler","borderColor","fillOpacity","c","darken","weight","fillColor","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0fcb6d23.chunk.js","sourcesContent":["const itemFilterFunction = ({ filterState }) => {\n  return (item) => {\n    return filterState?.kampagnen?.includes(item.kampagne.bezeichnung);\n  };\n};\nexport default itemFilterFunction;\n","import localforage from \"localforage\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport { Alert, Button, Form, Modal } from \"react-bootstrap\";\nimport IconComp from \"react-cismap/commons/Icon\";\nimport { ResponsiveTopicMapContext } from \"react-cismap/contexts/ResponsiveTopicMapContextProvider\";\nimport { appKey } from \"../App\";\nconst LoginForm = ({\n  setJWT = (jwt) => {\n    console.log(\"you need to set the attribute setJWT in the <Logoin> component\", jwt);\n  },\n  loginInfo,\n  setLoginInfo = () => {},\n}) => {\n  const { windowSize } = useContext(ResponsiveTopicMapContext);\n  const pwFieldRef = useRef();\n  const userFieldRef = useRef();\n  const _height = windowSize?.height || 800 - 180;\n  const modalBodyStyle = {\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    maxHeight: _height,\n  };\n  const [user, _setUser] = useState(\"\");\n  const [pw, setPw] = useState(\"\");\n  window.localforage = localforage;\n  const setUser = (user) => {\n    localforage.setItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"user\", user);\n    _setUser(user);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const userInCache = await localforage.getItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"user\");\n      if (userInCache) {\n        setUser(userInCache);\n      }\n      if (userFieldRef?.current) {\n        userFieldRef.current.focus();\n        userFieldRef.current.select();\n      }\n    })();\n  }, []);\n\n  const login = () => {\n    fetch(\"https://potenzialflaechen-online-api.cismet.de/users\", {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Basic \" + btoa(user + \"@\" + \"WUNDA_BLAU\" + \":\" + pw),\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then(function (response) {\n        if (response.status >= 200 && response.status < 300) {\n          response.json().then(function (responseWithJWT) {\n            const jwt = responseWithJWT.jwt;\n            setLoginInfo({\n              color: \"#79BD9A\",\n              text: \"Anmeldung erfolgreich. Daten werden geladen.\",\n            });\n            setTimeout(() => {\n              setJWT(jwt);\n              setLoginInfo();\n            }, 500);\n          });\n        } else {\n          setLoginInfo({\n            color: \"#FF8048\",\n            text: \"Bei der Anmeldung ist ein Fehler aufgetreten. \",\n          });\n          setTimeout(() => {\n            setLoginInfo();\n          }, 2500);\n        }\n      })\n      .catch(function (err) {\n        setLoginInfo({ color: \"#FF3030\", text: \"Bei der Anmeldung ist ein Fehler aufgetreten.\" });\n        setTimeout(() => {\n          setLoginInfo();\n        }, 2500);\n      });\n  };\n\n  return (\n    <Modal\n      style={{\n        zIndex: 3000000000,\n      }}\n      height='100%'\n      size='l'\n      show={true}\n      //   onHide={close}\n      keyboard={false}\n    >\n      <Modal.Header>\n        <Modal.Title>\n          <IconComp name={\"user\"} /> Anmeldung\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body style={modalBodyStyle} id='potenzialflaechen-online' key='login'>\n        <Form>\n          <Form.Group controlId='potenzialflaechen-online-login'>\n            <Form.Label>WuNDa Benutzername</Form.Label>\n            <Form.Control\n              value={user}\n              ref={userFieldRef}\n              onChange={(e) => {\n                setUser(e.target.value);\n              }}\n              onKeyPress={(event) => {\n                if (event.key === \"Enter\") {\n                  // login();\n                  if (pwFieldRef.current) {\n                    pwFieldRef.current.focus();\n                  }\n                }\n              }}\n              placeholder='Login hier eingeben'\n            />\n            {/* <Form.Text className='text-muted'>\n              We'll never share your email with anyone else.\n            </Form.Text> */}\n          </Form.Group>\n\n          <Form.Group controlId='potenzialflaechen-online-pass'>\n            <Form.Label>Passwort</Form.Label>\n            <Form.Control\n              ref={pwFieldRef}\n              value={pw}\n              onChange={(e) => {\n                setPw(e.target.value);\n              }}\n              type='password'\n              placeholder='Password'\n              onKeyPress={(event) => {\n                if (event.key === \"Enter\") {\n                  login();\n                }\n              }}\n            />\n          </Form.Group>\n          <div\n            style={{\n              width: \"100%\",\n              display: \"flex\",\n              alignItems: \"baseline\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            {loginInfo?.text && (\n              <div style={{ margin: 10, color: loginInfo?.color || \"black\" }}>\n                <b>{loginInfo?.text}</b>\n              </div>\n            )}\n            <div style={{ flexShrink: 100 }}></div>\n\n            <Button\n              onClick={(e) => {\n                login();\n              }}\n              style={{ margin: 10, marginTop: 30 }}\n              variant='primary'\n            >\n              Anmeldung\n            </Button>\n          </div>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  );\n};\nexport default LoginForm;\n","import { useContext } from \"react\";\nimport { ResponsiveTopicMapContext } from \"react-cismap/contexts/ResponsiveTopicMapContextProvider\";\n\nconst Title = ({ logout, jwt }) => {\n  const { windowSize } = useContext(ResponsiveTopicMapContext);\n  let user, jwtPayload;\n  try {\n    jwtPayload = atob(jwt.split(\".\")[1]);\n    user = JSON.parse(jwtPayload).sub;\n  } catch (e) {}\n\n  const titleContent = (\n    <div>\n      <b>Potenzialflächen-Online</b> ({user})\n      <div style={{ float: \"right\", paddingRight: 10 }}>\n        <a\n          style={{ color: \"#337ab7\" }}\n          onClick={() => {\n            logout();\n          }}\n        >\n          {/* <FontAwesomeIcon icon={faRandom} style={{ marginRight: 5 }} /> */}\n          abmelden\n        </a>\n      </div>\n    </div>\n  );\n\n  return (\n    <table\n      style={{\n        width: (windowSize?.width || 300) - 54 - 12 - 38 - 12 + \"px\",\n        height: \"30px\",\n        position: \"absolute\",\n        left: 54,\n        top: 12,\n        zIndex: 555,\n      }}\n    >\n      <tbody>\n        <tr>\n          <td\n            style={{\n              textAlign: \"center\",\n              verticalAlign: \"middle\",\n              background: \"#ffffff\",\n              color: \"black\",\n              opacity: \"0.9\",\n              paddingLeft: \"10px\",\n            }}\n          >\n            {titleContent}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n\nexport default Title;\n","import { useContext } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport IconComp from \"react-cismap/commons/Icon\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport ReactLoading from \"react-loading\";\n\nconst Waiting = ({ waiting }) => {\n  const { selectedFeature } = useContext(FeatureCollectionContext);\n\n  return (\n    <Modal\n      style={{\n        zIndex: 3000000000,\n      }}\n      height='200'\n      size='s'\n      show={waiting !== undefined}\n      //   onHide={close}\n      keyboard={false}\n    >\n      <Modal.Header>\n        <Modal.Title>\n          <IconComp name={waiting?.icon} /> {waiting?.title}\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"baseline\" }}>\n          <ReactLoading type={\"cylon\"} color={selectedFeature?.properties.color} />{\" \"}\n          <div style={{ marginLeft: 20 }}>{waiting?.text}</div>\n        </div>\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default Waiting;\n","import { useContext, useEffect } from \"react\";\nimport { FeatureCollectionDispatchContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { TopicMapDispatchContext } from \"react-cismap/contexts/TopicMapContextProvider\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport localforage from \"localforage\";\n//import { md5ActionFetchDAQ } from \"react-cismap/tools/fetching\";\nconst md5ActionFetchDAQ = async (prefix, apiUrl, jwt, daqKey) => {\n  const cachePrefix = \"@\" + prefix + \"..\" + apiUrl + \".\" + daqKey;\n  const md5Key = cachePrefix + \".md5\";\n  const dataKey = cachePrefix + \".data\";\n  const timeKey = cachePrefix + \".time\";\n  const md5InCache = await localforage.getItem(md5Key);\n  console.log(\"DAQ for \" + daqKey);\n  let taskParameters = {\n    parameters: {\n      daqKey,\n      md5: md5InCache || \"-\",\n    },\n  };\n\n  let fd = new FormData();\n  fd.append(\n    \"taskparams\",\n    new Blob([JSON.stringify(taskParameters)], {\n      type: \"application/json\",\n    })\n  );\n\n  const response = await fetch(\n    apiUrl + \"/actions/WUNDA_BLAU.dataAquisition/tasks?resultingInstanceType=result\",\n    {\n      method: \"POST\",\n      // method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + jwt,\n        // \"Content-Type\": \"application/json\",\n        // Accept: \"application/json\",\n      },\n      body: fd,\n    }\n  );\n\n  if (response.status >= 200 && response.status < 300) {\n    const content = await response.json();\n    if (content.res) {\n      try {\n        const result = JSON.parse(content.res);\n        let status = result.status;\n        let potenzialflaechen;\n        if (status === 200) {\n          console.log(\"DAQ cache miss for \" + daqKey);\n\n          potenzialflaechen = JSON.parse(result.content);\n          await localforage.setItem(dataKey, result.content);\n          await localforage.setItem(md5Key, result.md5);\n          await localforage.setItem(timeKey, result.time);\n        } else if (status === 304) {\n          console.log(\"DAQ cache hit for \" + daqKey);\n\n          potenzialflaechen = JSON.parse(await localforage.getItem(dataKey));\n        }\n\n        return new Promise((resolve, reject) => {\n          resolve(potenzialflaechen);\n        });\n      } catch (e) {\n        return new Promise((resolve, reject) => {\n          reject({\n            status: 500,\n            desc: \"error when parsing the server result. probably the content has the wrong structure\",\n            content,\n            exception: e,\n          });\n        });\n      }\n    } else {\n      return new Promise((resolve, reject) => {\n        reject({\n          status: 500,\n          desc: \"error when parsing the server result.\",\n          content,\n        });\n      });\n    }\n  } else if (response.status === 401) {\n    return new Promise((resolve, reject) => {\n      reject({ status: response.status, desc: \"unauthorized\" });\n    });\n  } else {\n    return new Promise((resolve, reject) => {\n      reject({ status: response.status, desc: \"unknown\" });\n    });\n  }\n};\n\nconst FC = ({ jwt, setJWT, setLoginInfo }) => {\n  const { zoomToFeature } = useContext(TopicMapDispatchContext);\n  const { setItems } = useContext(FeatureCollectionDispatchContext);\n\n  useEffect(() => {\n    if (jwt !== undefined) {\n      md5ActionFetchDAQ(\n        \"potenzialflaechen-online\",\n        \"https://potenzialflaechen-online-api.cismet.de\",\n        jwt,\n        \"potenzialflaechen\"\n      )\n        .then(\n          (potenzialflaechen) => {\n            setItems(potenzialflaechen);\n          },\n          (problem) => {\n            if (problem.status === 401) {\n              setJWT(undefined);\n              setLoginInfo({ color: \"#F9D423\", text: \"Bitte melden Sie sich erneut an.\" });\n              setTimeout(() => {\n                setLoginInfo();\n              }, 2500);\n            }\n            setItems([]);\n          }\n        )\n        .catch((e) => {\n          console.log(\"xxx error \", e);\n        });\n    } else {\n      setItems([]);\n    }\n  }, [jwt]);\n  return (\n    <FeatureCollection\n      featureClickHandler={(event) => {\n        event.originalEvent.stopImmediatePropagation();\n        //console.log(\"yyy featureClick\", event, new Error(\"StackTrace\"));\n        const nonce = Math.round(Math.random() * 100);\n        // console.re.log(\n        //   nonce + \":yyy event.originalEvent._simulated\",\n        //   event.originalEvent._simulated\n        // );\n        // console.log(\"yyy event.targetTouches\", event.originalEvent.targetTouches);\n        // if (!event.originalEvent._simulated) {\n        const feature = event.target.feature;\n\n        if (feature.selected === true) {\n          // console.re.log(nonce + \"yyy will zoom\");\n\n          zoomToFeature(event.target.feature);\n        }\n        // }\n      }}\n    />\n  );\n};\n\nexport default FC;\n","const APPERSION = \"0.2.2\";\nconst APPHASH = \"#1e05b3bb89c4ba29be0ae8322e744672d9a499a1\";\n\nexport const getApplicationVersion = () => {\n  /*eslint-disable no-useless-concat*/\n  if (APPERSION === \"%APPLICATION\" + \"_\" + \"VERSION%\") {\n    return \"dev-hot-reload\";\n  } else {\n    return APPERSION;\n  }\n};\nexport const getApplicationHash = () => {\n  if (APPHASH === \"%APPLICATION\" + \"_\" + \"HASH%\") {\n    return \"#dev-hot-reload\";\n  } else {\n    return APPHASH;\n  }\n};\n","import { useContext } from \"react\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { getApplicationVersion } from \"../version\";\nimport { version as reactCismapVersion } from \"react-cismap/meta\";\nimport { Link, scroller } from \"react-scroll\";\n\nconst Footer = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n\n  return (\n    <div style={{ fontSize: \"11px\" }}>\n      <b>Hintergrundkarten</b>: Stadtkarte 2.0 © RVR | True Orthophoto 2020 © Stadt Wuppertal |\n      Openmaptiles basierte Vectorkarte (hosted by cismet){\" \"}\n      <a\n        className='pleaseRenderAsLink'\n        onClick={() => {\n          setAppMenuActiveMenuSection(\"help\");\n          scroller.scrollTo(\"Datengrundlage\", { containerId: \"myMenu\" });\n        }}\n      >\n        (Details und Nutzungsbedingungen)\n      </a>\n      <br />\n      <div>\n        <b>\n          {document.title} v{getApplicationVersion()}\n        </b>\n        :{\" \"}\n        <a href='https://cismet.de/' target='_cismet'>\n          cismet GmbH\n        </a>{\" \"}\n        auf Basis von{\" \"}\n        <a href='http://leafletjs.com/' target='_more'>\n          Leaflet\n        </a>{\" \"}\n        und{\" \"}\n        <a href='https://cismet.de/#refs' target='_cismet'>\n          cids | react-cismap v{reactCismapVersion}\n        </a>{\" \"}\n        |{\" \"}\n        <a\n          target='_blank'\n          rel='noopener noreferrer'\n          href='https://cismet.de/datenschutzerklaerung.html'\n        >\n          Datenschutzerklärung (Privacy Policy)\n        </a>\n      </div>\n    </div>\n  );\n};\nexport default Footer;\n","import { useContext } from \"react\";\nimport {\n  FeatureCollectionContext,\n  FeatureCollectionDispatchContext,\n} from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { getSimpleHelpForTM } from \"react-cismap/tools/uiHelper\";\nimport { Link } from \"react-scroll\";\nimport ModalApplicationMenu from \"react-cismap/topicmaps/menu/ModalApplicationMenu\";\nimport Section from \"react-cismap/topicmaps/menu/Section\";\nimport FilterPanel from \"react-cismap/topicmaps/menu/FilterPanel\";\nimport DefaultSettingsPanel from \"react-cismap/topicmaps/menu/DefaultSettingsPanel\";\nimport ConfigurableDocBlocks from \"react-cismap/topicmaps/ConfigurableDocBlocks\";\nimport MenuFooter from \"./MenuFooter\";\n\nconst MyMenu = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n  const { filterState, filterMode, filteredItems, shownFeatures } =\n    useContext(FeatureCollectionContext);\n  const { setFilterState, setFilterMode } = useContext(FeatureCollectionDispatchContext);\n\n  const { items } = useContext(FeatureCollectionContext);\n\n  const kampagnen = [];\n  const kampagnenValues = [];\n\n  for (const item of items || []) {\n    if (!kampagnen.includes(item.kampagne.bezeichnung)) {\n      kampagnen.push(item.kampagne.bezeichnung);\n      kampagnenValues.push({\n        key: item.kampagne.bezeichnung,\n        title: item.kampagne.bezeichnung,\n        color: item.kampagne.color,\n        icon: \"square\",\n        iconPos: \"pre\",\n      });\n    }\n  }\n\n  const filterConfiguration = {\n    mode: \"list\", // list or tabs\n    resetedFilter: {\n      kampagnen,\n    },\n    filters: [\n      {\n        title: \"Kampagnen\",\n        key: \"kampagnen\",\n        icon: \"layer-group\",\n        type: \"checkBoxes\", //\"tags\" or \"checkBoxes\",\n        values: kampagnenValues,\n        setAll: () => {\n          setFilterState({ ...filterState, kampagnen });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, kampagnen: [] });\n        },\n        // colorizer: (item, selected) => {\n        //   console.log(\"yyy colorizer item\", item);\n\n        //   return selected ? item.kampagne.color : \"#ee00ee\";\n        // },\n      },\n    ],\n  };\n\n  if (filterState === undefined && items !== undefined && items.length !== 0) {\n    setFilterState({ kampagnen });\n  }\n  if (filterMode === undefined && items !== undefined) {\n    setFilterMode(\"kampagnen\");\n  }\n  const topicMapTitle = \"Potenzialflächen Online\";\n  const simpleHelp = undefined;\n\n  const getFilterHeader = () => {\n    const count = filteredItems?.length || 0;\n\n    let term;\n    if (count === 1) {\n      term = \"Fläche\";\n    } else {\n      term = \"Flächen\";\n    }\n\n    return `Meine Potenzialflächen (${count} ${term} gefunden, davon ${\n      shownFeatures?.length || \"0\"\n    } in der Karte)`;\n  };\n\n  return (\n    <ModalApplicationMenu\n      menuIcon={\"bars\"}\n      menuTitle={\"Meine Potenzialflächen, Einstellungen und Kompaktanleitung\"}\n      menuIntroduction={\n        <span>\n          Benutzen Sie die Auswahlmöglichkeiten unter{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='filter'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"filter\")}\n          >\n            Meine Potenzialflächen\n          </Link>\n          , um die in der Karte angezeigten Potenzialflächen auf die für Sie relevanten Themen zu\n          beschränken. Über{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='settings'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"settings\")}\n          >\n            Einstellungen\n          </Link>{\" \"}\n          können Sie die Darstellung der Hintergrundkarte an Ihre Interessen anpassen. Wählen Sie\n          die{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='help'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"help\")}\n          >\n            Kompaktanleitung\n          </Link>{\" \"}\n          für detailliertere Bedienungsinformationen.\n        </span>\n      }\n      menuSections={[\n        <Section\n          key='filter'\n          sectionKey='filter'\n          sectionTitle={getFilterHeader()}\n          sectionBsStyle='primary'\n          sectionContent={<FilterPanel filterConfiguration={filterConfiguration} />}\n        />,\n        <DefaultSettingsPanel\n          key='settings'\n          skipFilterTitleSettings={true}\n          skipClusteringSettings={true}\n          skipSymbolsizeSetting={true}\n        />,\n\n        <Section\n          key='help'\n          sectionKey='help'\n          sectionTitle='Kompaktanleitung'\n          sectionBsStyle='default'\n          sectionContent={\n            <ConfigurableDocBlocks configs={getSimpleHelpForTM(topicMapTitle, simpleHelp)} />\n          }\n        />,\n      ]}\n      menuFooter={<MenuFooter />}\n    />\n  );\n};\nexport default MyMenu;\n","import React, { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport SecondaryInfoPanelSection from \"react-cismap/topicmaps/SecondaryInfoPanelSection\";\nimport SecondaryInfo from \"react-cismap/topicmaps/SecondaryInfo\";\nconst InfoPanel = () => {\n  const { selectedFeature, items } = useContext(FeatureCollectionContext);\n\n  const potenzialflaeche = selectedFeature?.properties;\n\n  if (potenzialflaeche !== undefined) {\n    const subSections = [];\n\n    const display = (desc, value, valFunc) => {\n      if (value && valFunc === undefined && Array.isArray(value) === false) {\n        return (\n          <div>\n            <b>{desc}:</b> {value}\n          </div>\n        );\n      } else if (value && valFunc === undefined && Array.isArray(value) === true) {\n        return (\n          <div>\n            <b>{desc}:</b> {value.join(\", \")}\n          </div>\n        );\n      } else if (value && valFunc !== undefined) {\n        return (\n          <div>\n            <b>{desc}:</b> {valFunc(value)}\n          </div>\n        );\n      }\n    };\n\n    if (\n      potenzialflaeche?.lagebewertung_verkehr ||\n      potenzialflaeche?.oepnv ||\n      potenzialflaeche?.naehe_zu ||\n      potenzialflaeche?.siedlungsraeumliche_lage ||\n      potenzialflaeche?.topografie ||\n      potenzialflaeche?.hang\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection key='standort' bsStyle='info' header={\"Lagebeschreibung\"}>\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Lagebewertung Verkehr\", potenzialflaeche?.lagebewertung_verkehr)}\n            {display(\"ÖPNV Qualität\", potenzialflaeche?.oepnv)}\n            {display(\"Nähe zu\", potenzialflaeche?.naehe_zu)}\n            {display(\"Siedlungsräumliche Lage\", potenzialflaeche?.siedlungsraeumliche_lage)}\n            {display(\"Topografie\", potenzialflaeche?.topografie)}\n            {display(\"Hangrichtung\", potenzialflaeche?.hang)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (\n      potenzialflaeche?.bplaene ||\n      potenzialflaeche?.festsetzungen_bplan ||\n      potenzialflaeche?.bauordnungsrecht_genehmigung ||\n      potenzialflaeche?.bauordnungsrecht_genehmigung ||\n      potenzialflaeche?.stand_bauordnungsrecht\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='danger'\n          header={\"Planungsrecht / Bauplanungsrecht / Bauordnungsrecht\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Regionalplan\", potenzialflaeche?.regionalplan)}\n            {/* {display(\"Flächennutzungsplan\", potenzialflaeche?.)} */}\n            {display(\"Bebauungspläne\", potenzialflaeche?.bplaene)}\n            {display(\"Festsetzungen\", potenzialflaeche?.festsetzungen_bplan)}\n            {display(\n              \"Bauordnungsrecht (Genehmigung)\",\n              potenzialflaeche?.bauordnungsrecht_genehmigung\n            )}\n            {display(\"Bauordnungsrecht\", potenzialflaeche?.bauordnungsrecht_genehmigung)}\n            {/* bauordnungsrecht_baulast kommt noch dazu*/}\n            {display(\"Bauordnungsrecht (Stand)\", potenzialflaeche?.stand_bauordnungsrecht)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n\n    if (\n      potenzialflaeche?.umgebungsnutzung ||\n      potenzialflaeche?.brachflaechen ||\n      potenzialflaeche?.jahr_brachflaeche ||\n      potenzialflaeche?.bisherige_nutzung ||\n      potenzialflaeche?.bestand_bebauung ||\n      potenzialflaeche?.versiegelung ||\n      potenzialflaeche?.aeussere_erschliessung ||\n      potenzialflaeche?.wohnlagen ||\n      potenzialflaeche?.klimainformationen\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='success'\n          header={\"Erweiterte Informationen\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Umgebungsnutzung\", potenzialflaeche?.umgebungsnutzung)}\n            {display(\"Brachfläche\", potenzialflaeche?.brachflaechen)}\n            {display(\"Nutzungsaufgabe\", potenzialflaeche?.jahr_brachflaeche)}\n            {display(\"Bisherige Nutzung\", potenzialflaeche?.bisherige_nutzung)}\n            {display(\"Bestand Bebauung\", potenzialflaeche?.bestand_bebauung)}\n            {display(\"Bestand Versiegelung\", potenzialflaeche?.versiegelung)}\n            {display(\"Äußere Erschließung\", potenzialflaeche?.aeussere_erschliessung)}\n            {display(\"Wohnlagen\", potenzialflaeche?.wohnlagen)}\n            {/* {display(\"Bodenrichtwerte\", potenzialflaeche?.)} */}\n            {/* {display(\"Stadtraumtypen\", potenzialflaeche?.)} */}\n            {display(\"Klimainformationen\", potenzialflaeche?.klimainformationen)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (potenzialflaeche?.beschreibung_flaeche) {\n      subSections.push(\n        <SecondaryInfoPanelSection key='standort' bsStyle='warning' header={\"Beschreibung\"}>\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {potenzialflaeche?.beschreibung_flaeche.split(\"\\n\").map((part, index) => {\n              return <p key={\"beschreibung.part\" + index}>{part}</p>;\n            })}\n\n            {display(\"Quelle\", potenzialflaeche?.quelle)}\n            {display(\"Stand\", potenzialflaeche?.stand, (d) => {\n              try {\n                const date = new Date(d);\n                return date.getDate() + \".\" + (date.getMonth() + 1) + \".\" + date.getFullYear();\n              } catch (e) {\n                return d;\n              }\n            })}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (potenzialflaeche?.notwendige_massnahmen) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='success'\n          header={\"Notwendige Maßnahmen / Nächste Schritte\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <p>{potenzialflaeche?.notwendige_massnahmen}</p>\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    if (\n      potenzialflaeche?.kategorie ||\n      potenzialflaeche?.potenzialart ||\n      potenzialflaeche?.entwicklungsstand ||\n      potenzialflaeche?.restriktionen ||\n      potenzialflaeche?.empfohlene_nutzungen_wohnen ||\n      potenzialflaeche?.wohneinheiten ||\n      potenzialflaeche?.entwicklungsaussichten ||\n      potenzialflaeche?.verfuegbarkeit ||\n      potenzialflaeche?.verwertbarkeit ||\n      potenzialflaeche?.handlungsprioritaet ||\n      potenzialflaeche?.empfohlene_nutzungen ||\n      potenzialflaeche?.revitalisierung ||\n      potenzialflaeche?.handlungsdruck\n    ) {\n      subSections.push(\n        <SecondaryInfoPanelSection key='standort' bsStyle='info' header={\"Bewertung\"}>\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {display(\"Kategorie\", potenzialflaeche?.kategorie)}\n            {display(\"Potenzialart\", potenzialflaeche?.potenzialart)}\n            {display(\"Entwicklungsstand\", potenzialflaeche?.entwicklungsstand)}\n            {display(\"Restriktionen / Hemnisse\", potenzialflaeche?.restriktionen)}\n            {display(\n              \"Empfohlene Art der Wohnnutzung\",\n              potenzialflaeche?.empfohlene_nutzungen_wohnen\n            )}\n            {display(\"Anzahl mög. Wohneinheiten\", potenzialflaeche?.wohneinheiten, (t) => (\n              <span>\n                {potenzialflaeche?.anzahl_wohneinheiten && (\n                  <span> {potenzialflaeche?.anzahl_wohneinheiten}</span>\n                )}{\" \"}\n                {t}\n              </span>\n            ))}\n\n            {display(\"Entwicklungsaussichten\", potenzialflaeche?.entwicklungsaussichten)}\n            {display(\"Verfügbarkeit\", potenzialflaeche?.verfuegbarkeit)}\n            {display(\"Verwertbarkeit\", potenzialflaeche?.verwertbarkeit)}\n            {display(\"Handlungspriorität (Verwaltung)\", potenzialflaeche?.handlungsprioritaet)}\n            {display(\"Empfohlene Nutzung\", potenzialflaeche?.empfohlene_nutzungen)}\n            {display(\"Revitalisierung\", potenzialflaeche?.revitalisierung)}\n            {display(\"Handlungsdruck\", potenzialflaeche?.handlungsdruck)}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    // if (potenzialflaeche?.interne_hinweise) {\n    //   subSections.push(\n    //     <SecondaryInfoPanelSection key='standort' bsStyle='secondary' header={\"Interne Hinweise\"}>\n    //       <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n    //         {potenzialflaeche?.interne_hinweise.split(\"\\n\").map((part, index) => {\n    //           return <p key={\"interne_hinweise.part\" + index}>{part}</p>;\n    //         })}\n    //       </div>\n    //     </SecondaryInfoPanelSection>\n    //   );\n    // }\n\n    const showRawData = new URLSearchParams(window.location.href).get(\"showRawData\");\n    if (showRawData === \"true\") {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='standort'\n          bsStyle='info'\n          header={\"Potenzialfläche (raw data): \" + potenzialflaeche?.nummer}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <pre>{JSON.stringify(potenzialflaeche, null, 2)}</pre>\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    return (\n      <SecondaryInfo\n        titleIconName='info-circle'\n        title={\"Datenblatt: \" + potenzialflaeche?.bezeichnung}\n        mainSection={\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <div>\n              {display(\"Nummer\", potenzialflaeche?.nummer)}\n              {display(\"Bezeichnung\", potenzialflaeche?.bezeichnung)}\n              {display(\"Flächengröße\", potenzialflaeche?.groesse, (a) => (\n                <span>\n                  {a.toLocaleString()} m² (circa{\" \"}\n                  {(Math.round((a / 10000) * 10) / 10).toLocaleString()} ha)\n                </span>\n              ))}\n              {display(\"Stadtbezirk(e)\", potenzialflaeche?.stadtbezirke, (sb) => sb.join(\", \"))}\n              {display(\"Quartier(e)\", potenzialflaeche?.quartiere, (q) => q.join(\", \"))}\n              {display(\"Eigentümer\", potenzialflaeche?.eigentuemer, (e) => e.join(\", \"))}\n            </div>\n          </div>\n        }\n        subSections={subSections}\n      />\n    );\n  } else {\n    return null;\n  }\n};\nexport default InfoPanel;\n","import React, { useContext, useEffect } from \"react\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Color from \"color\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport { md5FetchText } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\nimport { defaultLayerConf } from \"react-cismap/tools/layerFactory\";\nimport \"react-cismap/topicMaps.css\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport \"./App.css\";\nimport FeatureCollection from \"./components/FeatureCollection\";\nimport MyMenu from \"./components/Menu\";\nimport InfoPanel from \"./components/SecondaryInfo\";\nimport { FeatureCollectionDispatchContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\n\nconst LogSelection = () => {\n  const { selectedFeature } = useContext(FeatureCollectionContext);\n  console.log(\"selectedFeature.properties\", selectedFeature?.properties);\n\n  return <div></div>;\n};\n\n// import consolere from \"console-remote-client\";\n\n// consolere.connect({\n//   server: \"http://bender:8088\",\n//   channel: \"pf\", // required\n//   redirectDefaultConsoleToRemote: false, // optional, default: false\n//   disableDefaultConsoleOutput: false, // optional, default: false\n// });\n\n// console.re.log(\"S T A R T\");\n\nconst baseLayerConf = { ...defaultLayerConf };\nbaseLayerConf.namedLayers.cismetLight = {\n  type: \"vector\",\n  style: \"https://omt.map-hosting.de/styles/cismet-light/style.json\",\n};\n\nconst host = \"https://wupp-topicmaps-data.cismet.de\";\nconst selectionColor = new Color(\"#2664D8\");\nexport const appKey = \"Potenzialflaechen.Online.Wuppertal\";\nconst getGazData = async (setStaticGazData) => {\n  const prefix = \"GazDataForStories\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/3857/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/3857/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/3857/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/3857/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/3857/kitas.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setStaticGazData(gazData);\n};\n\nfunction PotenzialflaechenOnlineMap({ gazData, jwt, setJWT, setLoginInfo }) {\n  const { setSelectedFeatureByPredicate } = useContext(FeatureCollectionDispatchContext);\n\n  return (\n    <TopicMapComponent\n      mapStyle={{ backgroundColor: \"white\" }}\n      gazData={gazData}\n      homeZoom={13}\n      maxZoom={22}\n      locatorControl={true}\n      modalMenu={<MyMenu />}\n      //backgroundlayers='wupp-plan-live@40'\n      // backgroundlayers='OMT_Klokantech_basic'\n      // 'trueOrtho2020@20'\n      infoBox={\n        <GenericInfoBoxFromFeature\n          pixelwidth={350}\n          config={{\n            displaySecondaryInfoAction: true,\n            city: \"Wuppertal\",\n            navigator: {\n              noun: {\n                singular: \"Potenzialfläche\",\n                plural: \"Potenzialflächen\",\n              },\n            },\n            noCurrentFeatureTitle: \"Keine Potenzialflächen gefunden\",\n            noCurrentFeatureContent: \"\",\n          }}\n        />\n      }\n      secondaryInfo={<InfoPanel />}\n      gazetteerHitTrigger={(hits) => {\n        if (Array.isArray(hits) && hits[0]?.more?.pid) {\n          setSelectedFeatureByPredicate((feature) => {\n            try {\n              return parseInt(feature.properties.id) === hits[0].more.pid;\n            } catch (e) {\n              return false;\n            }\n          });\n\n          setTimeout(() => {}, 1);\n        }\n      }}\n    >\n      <FeatureCollection jwt={jwt} setJWT={setJWT} setLoginInfo={setLoginInfo} />\n      {/* <LogSelection /> */}\n    </TopicMapComponent>\n  );\n}\n\nexport default PotenzialflaechenOnlineMap;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport Color from \"color\";\nimport \"leaflet/dist/leaflet.css\";\nimport localforage from \"localforage\";\nimport { useEffect, useState } from \"react\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport { MappingConstants } from \"react-cismap\";\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { getInternetExplorerVersion } from \"react-cismap/tools/browserHelper\";\nimport { md5FetchText } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\nimport { defaultLayerConf } from \"react-cismap/tools/layerFactory\";\nimport \"react-cismap/topicMaps.css\";\nimport \"./App.css\";\nimport itemFilterFunction from \"./components/filterFunction\";\nimport LoginForm from \"./components/LoginForm\";\nimport Title from \"./components/TitleControl\";\nimport Waiting from \"./components/Waiting\";\nimport PotenzialflaechenOnlineMap from \"./PotenzialflaechenOnlineMap\";\n\n// import consolere from \"console-remote-client\";\n\n// consolere.connect({\n//   server: \"http://bender:8088\",\n//   channel: \"pf\", // required\n//   redirectDefaultConsoleToRemote: false, // optional, default: false\n//   disableDefaultConsoleOutput: false, // optional, default: false\n// });\n\n// console.re.log(\"S T A R T\");\n\nconst baseLayerConf = { ...defaultLayerConf };\nbaseLayerConf.namedLayers.cismetLight = {\n  type: \"vector\",\n  style: \"https://omt.map-hosting.de/styles/cismet-light/style.json\",\n};\n\nconst host = \"https://wupp-topicmaps-data.cismet.de\";\nconst selectionColor = new Color(\"#2664D8\");\nexport const appKey = \"Potenzialflaechen.Online.Wuppertal\";\nconst getGazData = async (setStaticGazData) => {\n  const prefix = \"GazDataForStories\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/3857/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/3857/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/3857/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/3857/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/3857/kitas.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setStaticGazData(gazData);\n};\n\nfunction App() {\n  const [staticGazData, setStaticGazData] = useState([]);\n  const [dynGazData, setDynGazData] = useState([]);\n  const [gazData, setGazData] = useState([]);\n\n  useEffect(() => {\n    setGazData([...dynGazData, ...staticGazData]);\n  }, [staticGazData, dynGazData]);\n\n  useEffect(() => {\n    getGazData(setStaticGazData);\n  }, []);\n\n  const [jwt, _setJWT] = useState();\n  const [loginInfo, setLoginInfo] = useState();\n\n  const [waiting, setWaiting] = useState();\n\n  const setJWT = (jwt) => {\n    localforage.setItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"jwt\", jwt);\n    _setJWT(jwt);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const jwtInCache = await localforage.getItem(\"@\" + appKey + \".\" + \"auth\" + \".\" + \"jwt\");\n      if (jwtInCache) {\n        setJWT(jwtInCache);\n      } else {\n        setJWT(undefined);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (jwt) {\n      let taskParameters = {\n        parameters: {\n          daqKey: \"potenzialflaechenGaz\",\n        },\n      };\n\n      let fd = new FormData();\n      fd.append(\n        \"taskparams\",\n        new Blob([JSON.stringify(taskParameters)], {\n          type: \"application/json\",\n        })\n      );\n      fetch(\n        // \"https://potenzialflaechen-online-api.cismet.de/users\",\n        // \"https://eniptvf9euuoeze.m.pipedream.net\",\n\n        \"https://potenzialflaechen-online-api.cismet.de/actions/WUNDA_BLAU.dataAquisition/tasks?resultingInstanceType=result\",\n        {\n          method: \"POST\",\n          // method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + jwt,\n            // \"Content-Type\": \"application/json\",\n            // Accept: \"application/json\",\n          },\n          body: fd,\n        }\n      )\n        .then(function (response) {\n          if (response.status >= 200 && response.status < 300) {\n            response.json().then(function (content) {\n              // console.log(\"response from cids\", content);\n              if (content.res) {\n                const gaz = JSON.parse(content.res);\n                if (Array.isArray(gaz)) {\n                  setDynGazData(gaz);\n                } else {\n                  setDynGazData(JSON.parse(gaz.content));\n                }\n              } else {\n                console.log(\"Probleme ber der Abfrage der Gazetteer-Daten\");\n              }\n            });\n          } else {\n            if (response.status === 401) {\n              setJWT(undefined);\n              setLoginInfo({ color: \"#F9D423\", text: \"Bitte melden Sie sich erneut an.\" });\n              setTimeout(() => {\n                setLoginInfo();\n              }, 2500);\n            }\n            // response.text().then((x) => {189\t60\t90\n            //   console.log(\"error\", x);\n            // });\n          }\n        })\n        .catch(function (err) {\n          ///\n        });\n    }\n  }, [jwt]);\n\n  let backgroundModes;\n  if (getInternetExplorerVersion() === -1) {\n    backgroundModes = [\n      {\n        title: \"Stadtplan (grau)\",\n        mode: \"default\",\n        layerKey: \"stadtplan\",\n      },\n      {\n        title: \"Stadtplan (Vektordaten light)\",\n        mode: \"default\",\n        layerKey: \"vector\",\n      },\n      {\n        title: \"Amtliche Basiskarte\",\n        mode: \"default\",\n        layerKey: \"abkg\",\n      },\n      { title: \"Luftbildkarte\", mode: \"default\", layerKey: \"lbk\" },\n    ];\n  } else {\n    backgroundModes = [\n      {\n        title: \"Stadtplan\",\n        mode: \"default\",\n        layerKey: \"stadtplan\",\n      },\n      {\n        title: \"Amtliche Basiskarte\",\n        mode: \"default\",\n        layerKey: \"abkg\",\n      },\n      { title: \"Luftbildkarte\", mode: \"default\", layerKey: \"lbk\" },\n    ];\n  }\n  const backgroundConfigurations = {\n    lbk: {\n      layerkey: \"rvrGrau@50|trueOrtho2020@40\",\n      src: \"/images/rain-hazard-map-bg/ortho.png\",\n      title: \"Luftbildkarte\",\n    },\n    stadtplan: {\n      layerkey: \"rvrGrau@45\",\n      src: \"/images/rain-hazard-map-bg/citymap.png\",\n      title: \"Stadtplan\",\n    },\n    vector: {\n      layerkey: \"cismetLight\",\n      src: \"/images/rain-hazard-map-bg/citymap.png\",\n      title: \"Stadtplan\",\n    },\n    abkg: {\n      layerkey: \"bplan_abkg@70\",\n      src: \"/images/rain-hazard-map-bg/citymap.png\",\n      title: \"Amtliche Basiskarte\",\n    },\n  };\n\n  return (\n    <TopicMapContextProvider\n      appKey={appKey}\n      backgroundConfigurations={backgroundConfigurations}\n      backgroundModes={backgroundModes}\n      referenceSystem={MappingConstants.crs3857}\n      mapEPSGCode='3857'\n      referenceSystemDefinition={MappingConstants.proj4crs3857def}\n      maskingPolygon='POLYGON((668010.063156992 6750719.23021889,928912.612468322 6757273.20343972,930494.610325512 6577553.43685138,675236.835570551 6571367.64964125,668010.063156992 6750719.23021889))'\n      getColorFromProperties={(item) => item.kampagne.color}\n      itemFilterFunction={itemFilterFunction}\n      classKeyFunction={(item) => item?.kampagne?.bezeichnung}\n      convertItemToFeature={(_item) => {\n        const item = JSON.parse(JSON.stringify(_item));\n        //         console.log(\"xxx item?.geojson?.crs\", item?.geojson?.coordinates);\n        //         console.log(\n        //           \"xxx item?.geojson?.crs\",\n        //           //item?.geojson\n        // roj          proj4(proj4crs25832def, proj4crs3857def, item?.geojson?.coordinates)\n        //         );\n\n        const geometry = item?.geojson;\n        const selected = false;\n        const type = \"Feature\";\n        const text = item?.bezeichnung;\n\n        item.color = item?.kampagne?.color;\n        let subtitle = \"\";\n\n        if (item?.beschreibung_flaeche) {\n          subtitle = item.beschreibung_flaeche.split(\"\\n\")[0];\n        } else {\n          subtitle = \"Nähere Informationen zur Fläche finden Sie im Datenblatt.\";\n        }\n\n        const info = {\n          header: item?.kampagne?.bezeichnung,\n          title: text,\n          subtitle:\n            \"<html><div><b>Nummer:</b> \" +\n            item?.nummer +\n            \"</div><div><b>Größe:</b> \" +\n            parseInt(item?.groesse, 10).toLocaleString() +\n            \" m²</div></html>\",\n        };\n        item.info = info;\n        item.genericLinks = [\n          {\n            action: () => {\n              setWaiting({\n                icon: \"file-pdf\",\n                title: \"Steckbrief \" + item.nummer + \" wird erzeugt\",\n                text: \"Nachdem der Steckbrief fertiggestellt wurde, startet automatisch der Download. (Dauert im Moment noch etwas länger ¯\\\\_(ツ)_/¯ ) \",\n              });\n              let taskParameters = {\n                parameters: {\n                  POTENZIALFLAECHE: parseInt(item.id),\n                },\n              };\n\n              let fd = new FormData();\n              fd.append(\n                \"taskparams\",\n                new Blob([JSON.stringify(taskParameters)], {\n                  type: \"application/json\",\n                })\n              );\n              fetch(\n                // \"https://potenzialflaechen-online-api.cismet.de/users\",\n                // \"https://eniptvf9euuoeze.m.pipedream.net\",\n\n                \"https://potenzialflaechen-online-api.cismet.de/actions/WUNDA_BLAU.potenzialflaecheReport/tasks?resultingInstanceType=result\",\n                {\n                  method: \"POST\",\n                  // method: \"GET\",\n                  headers: {\n                    Authorization: \"Bearer \" + jwt,\n                    // \"Content-Type\": \"application/json\",\n                    // Accept: \"application/json\",\n                  },\n                  body: fd,\n                }\n              )\n                .then(function (response) {\n                  if (response.status >= 200 && response.status < 300) {\n                    response.json().then(function (content) {\n                      // console.log(\"response from cids\", content);\n                      if (content.res) {\n                        const byteCharacters = atob(content.res);\n                        const byteNumbers = new Array(byteCharacters.length);\n                        for (let i = 0; i < byteCharacters.length; i++) {\n                          byteNumbers[i] = byteCharacters.charCodeAt(i);\n                        }\n                        const byteArray = new Uint8Array(byteNumbers);\n                        const blob = new Blob([byteArray], { type: \"application/pdf\" });\n\n                        let link = document.createElement(\"a\");\n                        link.href = window.URL.createObjectURL(blob);\n                        link.download = \"Steckbrief.\" + item.nummer + \".pdf\";\n                        document.body.appendChild(link);\n                        link.click();\n                        document.body.removeChild(link);\n                      } else {\n                        console.log(\"Probleme beim Erzeugen des Reports\");\n                      }\n                      setWaiting();\n                    });\n                  } else {\n                    if (response.status === 401) {\n                      setWaiting();\n                      setJWT(undefined);\n                      setLoginInfo({ color: \"#F9D423\", text: \"Bitte melden Sie sich erneut an.\" });\n                      setTimeout(() => {\n                        setLoginInfo();\n                      }, 2500);\n                    }\n                    // response.text().then((x) => {189\t60\t90\n                    //   console.log(\"error\", x);\n                    // });\n                  }\n                })\n                .catch(function (err) {\n                  ///\n                  setWaiting();\n                });\n\n              // setTimeout(() => {\n              //   setWaiting();\n              // }, 2500);\n            },\n            iconname: \"file-pdf\",\n            tooltip: \"Steckbrief erzeugen\",\n          },\n        ];\n        return {\n          text,\n          type,\n          selected,\n          geometry,\n          crs: geometry?.crs || {\n            type: \"name\",\n            properties: {\n              name: \"urn:ogc:def:crs:EPSG::25832\",\n            },\n          },\n          properties: item,\n        };\n      }}\n      alwaysShowAllFeatures={false}\n      getFeatureStyler={() => {\n        return (feature) => {\n          const c = new Color(feature.properties.color);\n          let borderColor, fillOpacity;\n          if (feature.selected === true) {\n            fillOpacity = 0.85;\n            borderColor = selectionColor;\n          } else {\n            fillOpacity = 0.6;\n            borderColor = c.darken(0.1);\n          }\n          const style = {\n            color: borderColor,\n            weight: 2,\n            opacity: 0.7,\n            fillColor: c,\n            fillOpacity,\n          };\n          return style;\n        };\n      }}\n    >\n      {jwt === undefined && (\n        <LoginForm\n          key={\"login.\"}\n          setJWT={setJWT}\n          loginInfo={loginInfo}\n          setLoginInfo={setLoginInfo}\n        />\n      )}\n      {jwt !== undefined && (\n        <Title\n          logout={() => {\n            setJWT(undefined);\n            setLoginInfo({ color: \"#69D2E7\", text: \"Sie wurden erfolgreich abgemeldet.\" });\n            setTimeout(() => {\n              setLoginInfo();\n            }, 2500);\n          }}\n          jwt={jwt}\n        />\n      )}\n      <Waiting waiting={waiting} />\n\n      <PotenzialflaechenOnlineMap\n        gazData={gazData}\n        jwt={jwt}\n        setJWT={setJWT}\n        setLoginInfo={setLoginInfo}\n      />\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}